function [ret,x0,str,ts,xts]=kmtest(t,x,u,flag);%KMTEST	is the M-file description of the SIMULINK system named KMTEST.%	The block-diagram can be displayed by typing: KMTEST.%%	SYS=KMTEST(T,X,U,FLAG) returns depending on FLAG certain%	system values given time point, T, current state vector, X,%	and input vector, U.%	FLAG is used to indicate the type of output to be returned in SYS.%%	Setting FLAG=1 causes KMTEST to return state derivatives, FLAG=2%	discrete states, FLAG=3 system outputs and FLAG=4 next sample%	time. For more information and other options see SFUNC.%%	Calling KMTEST with a FLAG of zero:%	[SIZES]=KMTEST([],[],[],0),  returns a vector, SIZES, which%	contains the sizes of the state vector and other parameters.%		SIZES(1) number of states%		SIZES(2) number of discrete states%		SIZES(3) number of outputs%		SIZES(4) number of inputs%		SIZES(5) number of roots (currently unsupported)%		SIZES(6) direct feedthrough flag%		SIZES(7) number of sample times%%	For the definition of other parameters in SIZES, see SFUNC.%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.% Note: This M-file is only used for saving graphical information;%       after the model is loaded into memory an internal model%       representation is used.% the system will take on the name of this mfile:sys = mfilename;new_system(sys)simver(1.3)if (0 == (nargin + nargout))     set_param(sys,'Location',[40,244,570,544])     open_system(sys)end;set_param(sys,'algorithm',     'RK-45')set_param(sys,'Start time',    '0.0')set_param(sys,'Stop time',     '1')set_param(sys,'Min step size', '0.001')set_param(sys,'Max step size', '.005')set_param(sys,'Relative error','1e-3')set_param(sys,'Return vars',   '')add_block('built-in/From Workspace',[sys,'/','gain'])set_param([sys,'/','gain'],...		'matl_expr','[0  0.08  0.15  0.75  0.95  1;  0  0  1  1 0  0]''',...		'position',[15,147,270,193])add_block('built-in/From Workspace',[sys,'/','target velocity'])set_param([sys,'/','target velocity'],...		'matl_expr','[0 0.5 0.500001 1; 15 15 0 0]''',...		'position',[20,89,235,121])add_block('built-in/To Workspace',[sys,'/','eyevel'])set_param([sys,'/','eyevel'],...		'mat-name','eyevel',...		'buffer','2000',...		'position',[460,107,510,123])add_block('built-in/To Workspace',[sys,'/','t'])set_param([sys,'/','t'],...		'mat-name','t',...		'position',[130,42,180,58])add_block('built-in/Clock',[sys,'/','Clock'])set_param([sys,'/','Clock'],...		'position',[75,40,95,60])add_block('built-in/To Workspace',[sys,'/','tgtvel'])set_param([sys,'/','tgtvel'],...		'mat-name','tgtvel',...		'buffer','2000',...		'position',[460,62,510,78])add_block('built-in/To Workspace',[sys,'/','gain_'])set_param([sys,'/','gain_'],...		'mat-name','gain',...		'buffer','2000',...		'position',[460,162,510,178])%     Subsystem  'gain scope'.new_system([sys,'/','gain scope'])set_param([sys,'/','gain scope'],'Location',[0,59,274,252])add_block('built-in/S-Function',[sys,'/',['gain scope/S-function',13,'M-file which plots',13,'lines',13,'']])set_param([sys,'/',['gain scope/S-function',13,'M-file which plots',13,'lines',13,'']],...		'function name','sfunyst',...		'parameters','ax, color, npts, dt',...		'position',[130,55,180,75])add_block('built-in/Inport',[sys,'/','gain scope/x'])set_param([sys,'/','gain scope/x'],...		'position',[65,55,85,75])add_line([sys,'/','gain scope'],[90,65;125,65])set_param([sys,'/','gain scope'],...		'Mask Display','plot(0,0,100,100,[83,76,63,52,42,38,28,16,11,84,11,11,11,90,90,11],[75,58,47,54,72,80,84,74,65,65,65,90,40,40,90,90])',...		'Mask Type','Storage scope.')set_param([sys,'/','gain scope'],...		'Mask Dialogue','Storage scope using MATLAB graph window.\nEnter plotting ranges and line type.|Initial Time Range:|Initial y-min:|Initial y-max:|Storage pts.:|Line type (rgbw-.:xo):')set_param([sys,'/','gain scope'],...		'Mask Translate','npts = @4; color = @5; ax = [0, @1, @2, @3]; dt=-1;')set_param([sys,'/','gain scope'],...		'Mask Help','This block uses a MATLAB figure window to plot the input signal.  The graph limits are automatically scaled to the min and max values of the signal stored in the scope''s signal buffer.  Line type must be in quotes.  See the M-file sfunyst.m.')set_param([sys,'/','gain scope'],...		'Mask Entries','1\/0\/1\/2000\/''y-/g--/c-./w:/m*/ro/b+''\/')%     Finished composite block 'gain scope'.set_param([sys,'/','gain scope'],...		'position',[280,235,310,275])%     Subsystem  'tgt,eye vel scope'.new_system([sys,'/','tgt,eye vel scope'])set_param([sys,'/','tgt,eye vel scope'],'Location',[0,59,274,252])add_block('built-in/S-Function',[sys,'/',['tgt,eye vel scope/S-function',13,'M-file which plots',13,'lines',13,'']])set_param([sys,'/',['tgt,eye vel scope/S-function',13,'M-file which plots',13,'lines',13,'']],...		'function name','sfunyst',...		'parameters','ax, color, npts, dt',...		'position',[130,55,180,75])add_block('built-in/Inport',[sys,'/','tgt,eye vel scope/x'])set_param([sys,'/','tgt,eye vel scope/x'],...		'position',[65,55,85,75])add_line([sys,'/','tgt,eye vel scope'],[90,65;125,65])set_param([sys,'/','tgt,eye vel scope'],...		'Mask Display','plot(0,0,100,100,[83,76,63,52,42,38,28,16,11,84,11,11,11,90,90,11],[75,58,47,54,72,80,84,74,65,65,65,90,40,40,90,90])',...		'Mask Type','Storage scope.')set_param([sys,'/','tgt,eye vel scope'],...		'Mask Dialogue','Storage scope using MATLAB graph window.\nEnter plotting ranges and line type.|Initial Time Range:|Initial y-min:|Initial y-max:|Storage pts.:|Line type (rgbw-.:xo):')set_param([sys,'/','tgt,eye vel scope'],...		'Mask Translate','npts = @4; color = @5; ax = [0, @1, @2, @3]; dt=-1;')set_param([sys,'/','tgt,eye vel scope'],...		'Mask Help','This block uses a MATLAB figure window to plot the input signal.  The graph limits are automatically scaled to the min and max values of the signal stored in the scope''s signal buffer.  Line type must be in quotes.  See the M-file sfunyst.m.')set_param([sys,'/','tgt,eye vel scope'],...		'Mask Entries','1\/0\/15\/2000\/''y-/g--/c-./w:/m*/ro/b+''\/')%     Finished composite block 'tgt,eye vel scope'.set_param([sys,'/','tgt,eye vel scope'],...		'position',[355,235,385,275])add_line(sys,[275,170;455,170])add_line(sys,[296,170;296,125;350,125])add_line(sys,[240,105;261,105;261,70;455,70])add_line(sys,[261,105;350,105])add_line(sys,[405,115;455,115])add_line(sys,[100,50;125,50])drawnow% Return any arguments.if (nargin | nargout)	% Must use feval here to access system in memory	if (nargin > 3)		if (flag == 0)			eval(['[ret,x0,str,ts,xts]=',sys,'(t,x,u,flag);'])		else			eval(['ret =', sys,'(t,x,u,flag);'])		end	else		[ret,x0,str,ts,xts] = feval(sys);	endelse	drawnow % Flash up the model and execute load callbackend
Date: Mon, 01 Aug 2005 13:48:50 -0400From: support@mathworks.comSubject: Re: Inconsistency when order of delay block and pole zero plant reversedJonathan,I am writing in reference to your Service Request # 1-1NII7J regarding 'Inconsistency when order of delay block and pole-zero plant reversed'.In order to better assist you, please send me the following information:1. A detailed description of the problem.2. Any relevant M-files, mdl files and data files.3. The exact steps I need to take to run your code.4. The exact error messages you are receiving, if any.Please reply to this email preserving the THREAD ID listed below. If you have a new technical support question, please submit a new request here:http://www.mathworks.com/contact_TS.htmlSincerely,AugustyoAugustyo NathApplication Support EngineerTechnical Support DepartmentThe MathWorks, Inc.Phone: (508) 647-7000 option 5Email: support@mathworks.com---Date: Wed, 03 Aug 2005 13:29:17 -0400Jonathan,The difference that you see in the two outputs when using a variable step solver is due to the rapidly changing input around 0.2 sec. When you add a delay block in front of the plant, the input to the zero-pole plant is shifted in time. The variable step solver does not select a small enough sample time to be able to measure two different rapidly changing signals slightly shifted in time in exactly the same way. This causes the discrepancy you notice in the output. The error is rectified to a large extent by choosing a low sample time of 0.001 secs which is much less than the delay of 0.08 secs.  If you need further assistance regarding this issue, please reply to this email preserving the THREAD ID listed below. If you have a new technical support question, please submit a new request here:http://www.mathworks.com/contact_TS.html.Sincerely,Augustyo---To: support@mathworks.comFrom: Jonathan Jacobs <jxj24@cwru.edu>Is the 0.001 second sample time you are referring to the explicit setting in the mask of the step and pulse inputs to the model, or the inherent sample time for the whole system?  We are not using a variable-step solver for this example (or for the model from which it was excerpted).Also, I never would have considered suspecting the '-1' default value for the 'Sample Time' field had it not been for a warning issued when I ran the model.  This leads me to worry whether or not I need to change other instances to try and regain some consistent model behavior.We are working on a very complex model that makes use of distributed delays, and we have been discovering that moving them around, or switching their order can lead to improper behavior.  It uses the fixed-time 4th order solver with a sample time of 0.001 seconds, which is on the order of the fastest behaviors in the physical system we are modeling.  Will it be necessary to use (e.g.) a higher-order solver, or perhaps an even shorter sample time?---Date: Thu, 04 Aug 2005 16:37:09 -0400Jonathan,When I mentioned sample time, I was referring to the inherent sample time of the whole system. The warning that you receive about source blocks was not referring to the inadequacy of the sample time. That warning is received whenever a source block has back-inherited sample time. Since a sample time 0.001 secs is of the order of the fastest dynamics in the system, it should be adequate. Selecting a solver depends on you system and it is a matter of trial and error to figure out which solver gives the required accuracy.Sincerely,Augustyo
function [ret,x0,str,ts,xts]=dandruff(t,x,u,flag);%DANDRUFF	is the M-file description of the SIMULINK system named DANDRUFF.%	The block-diagram can be displayed by typing: DANDRUFF.%%	SYS=DANDRUFF(T,X,U,FLAG) returns depending on FLAG certain%	system values given time point, T, current state vector, X,%	and input vector, U.%	FLAG is used to indicate the type of output to be returned in SYS.%%	Setting FLAG=1 causes DANDRUFF to return state derivatives, FLAG=2%	discrete states, FLAG=3 system outputs and FLAG=4 next sample%	time. For more information and other options see SFUNC.%%	Calling DANDRUFF with a FLAG of zero:%	[SIZES]=DANDRUFF([],[],[],0),  returns a vector, SIZES, which%	contains the sizes of the state vector and other parameters.%		SIZES(1) number of states%		SIZES(2) number of discrete states%		SIZES(3) number of outputs%		SIZES(4) number of inputs%		SIZES(5) number of roots (currently unsupported)%		SIZES(6) direct feedthrough flag%		SIZES(7) number of sample times%%	For the definition of other parameters in SIZES, see SFUNC.%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.% Note: This M-file is only used for saving graphical information;%       after the model is loaded into memory an internal model%       representation is used.% the system will take on the name of this mfile:sys = mfilename;new_system(sys)simver(1.3)if (0 == (nargin + nargout))     set_param(sys,'Location',[238,69,736,543])     open_system(sys)end;set_param(sys,'algorithm',     'RK-45')set_param(sys,'Start time',    '0.0')set_param(sys,'Stop time',     '999999')set_param(sys,'Min step size', '0.0001')set_param(sys,'Max step size', '10')set_param(sys,'Relative error','1e-3')set_param(sys,'Return vars',   '')%     Subsystem  'plselin'.new_system([sys,'/','plselin'])set_param([sys,'/','plselin'],'Location',[49,280,673,631])add_block('built-in/Inport',[sys,'/','plselin/in_1'])set_param([sys,'/','plselin/in_1'],...		'position',[15,145,35,165])add_block('built-in/Outport',[sys,'/','plselin/out_1'])set_param([sys,'/','plselin/out_1'],...		'position',[650,145,670,165])add_block('built-in/Product',[sys,'/','plselin/Product'])set_param([sys,'/','plselin/Product'],...		'position',[140,148,170,172])add_block('built-in/Saturation',[sys,'/','plselin/Saturation3'])set_param([sys,'/','plselin/Saturation3'],...		'hide name',0,...		'Lower Limit','-0.002',...		'Upper Limit','0.00',...		'position',[435,83,465,107])add_block('built-in/Product',[sys,'/','plselin/Product1'])set_param([sys,'/','plselin/Product1'],...		'hide name',0,...		'position',[410,223,440,247])add_block('built-in/Fcn',[sys,'/','plselin/Fcn1'])set_param([sys,'/','plselin/Fcn1'],...		'hide name',0,...		'Expr','-0.0102- u[1]*0.001248',...		'position',[305,220,345,240])add_block('built-in/Gain',[sys,'/','plselin/Gain'])set_param([sys,'/','plselin/Gain'],...		'hide name',0,...		'Gain','100',...		'position',[250,262,275,288])add_block('built-in/Saturation',[sys,'/','plselin/Saturation1'])set_param([sys,'/','plselin/Saturation1'],...		'hide name',0,...		'Lower Limit','0.0',...		'Upper Limit','1.0',...		'position',[310,263,340,287])add_block('built-in/Fcn',[sys,'/','plselin/Fcn'])set_param([sys,'/','plselin/Fcn'],...		'Expr','u[1]*100',...		'position',[240,150,280,170])add_block('built-in/Sum',[sys,'/','plselin/Sum1'])set_param([sys,'/','plselin/Sum1'],...		'hide name',0,...		'inputs','+-',...		'position',[245,85,265,105])add_block('built-in/Gain',[sys,'/','plselin/Gain4'])set_param([sys,'/','plselin/Gain4'],...		'hide name',0,...		'Gain','-1',...		'position',[380,82,405,108])add_block('built-in/Switch',[sys,'/','plselin/Switch1'])set_param([sys,'/','plselin/Switch1'],...		'hide name',0,...		'Threshold','0.040',...		'position',[315,79,345,111])add_block('built-in/Constant',[sys,'/','plselin/Constant1'])set_param([sys,'/','plselin/Constant1'],...		'Value','0.0',...		'position',[265,110,285,130])add_block('built-in/Sum',[sys,'/','plselin/Sum'])set_param([sys,'/','plselin/Sum'],...		'inputs','+++',...		'position',[505,197,525,243])add_block('built-in/Transport Delay',[sys,'/',['plselin/Transport',13,'Delay']])set_param([sys,'/',['plselin/Transport',13,'Delay']],...		'hide name',0,...		'Delay Time','0.001',...		'position',[155,100,195,130])add_block('built-in/Fcn',[sys,'/',['plselin/Amplitude',13,'Nonlinearity',13,'']])set_param([sys,'/',['plselin/Amplitude',13,'Nonlinearity',13,'']],...		'hide name',0,...		'Expr','615*u[1]/(9.2+u[1])',...		'position',[275,320,315,340])add_block('built-in/Saturation',[sys,'/','plselin/Saturation2'])set_param([sys,'/','plselin/Saturation2'],...		'orientation',2,...		'Lower Limit','0.0',...		'Upper Limit','1.0',...		'position',[235,373,265,397])add_block('built-in/Transport Delay',[sys,'/',['plselin/Transport',13,'Delay1']])set_param([sys,'/',['plselin/Transport',13,'Delay1']],...		'orientation',2,...		'Delay Time','0.001',...		'position',[355,370,395,400])add_block('built-in/Gain',[sys,'/','plselin/Gain3'])set_param([sys,'/','plselin/Gain3'],...		'orientation',2,...		'Gain','1000',...		'position',[445,372,470,398])add_block('built-in/Constant',[sys,'/','plselin/Constant'])set_param([sys,'/','plselin/Constant'],...		'Value','0.0',...		'position',[515,80,535,100])add_block('built-in/Switch',[sys,'/','plselin/Switch'])set_param([sys,'/','plselin/Switch'],...		'Threshold','0.0',...		'position',[595,139,625,171])add_block('built-in/Saturation',[sys,'/','plselin/Saturation'])set_param([sys,'/','plselin/Saturation'],...		'hide name',0,...		'Lower Limit','-0.0',...		'Upper Limit','1.0',...		'position',[315,148,345,172])%     Subsystem  'plselin/rstint2'.new_system([sys,'/','plselin/rstint2'])set_param([sys,'/','plselin/rstint2'],'Location',[87,75,622,445])add_block('built-in/Inport',[sys,'/','plselin/rstint2/in_1'])set_param([sys,'/','plselin/rstint2/in_1'],...		'position',[50,295,70,315])add_block('built-in/Outport',[sys,'/','plselin/rstint2/out_1'])set_param([sys,'/','plselin/rstint2/out_1'],...		'position',[515,290,535,310])add_block('built-in/Integrator',[sys,'/','plselin/rstint2/Integrator'])set_param([sys,'/','plselin/rstint2/Integrator'],...		'position',[400,290,420,310])add_block('built-in/Constant',[sys,'/','plselin/rstint2/Constant'])set_param([sys,'/','plselin/rstint2/Constant'],...		'Value','-1',...		'position',[250,35,270,55])add_block('built-in/Product',[sys,'/','plselin/rstint2/Product2'])set_param([sys,'/','plselin/rstint2/Product2'],...		'orientation',2,...		'position',[255,148,285,172])add_block('built-in/Gain',[sys,'/','plselin/rstint2/Gain'])set_param([sys,'/','plselin/rstint2/Gain'],...		'orientation',2,...		'Gain','1000',...		'position',[350,157,375,183])add_block('built-in/Sum',[sys,'/','plselin/rstint2/Sum3'])set_param([sys,'/','plselin/rstint2/Sum3'],...		'position',[335,290,355,310])add_block('built-in/Sum',[sys,'/','plselin/rstint2/Sum2'])set_param([sys,'/','plselin/rstint2/Sum2'],...		'position',[385,85,405,105])add_block('built-in/Saturation',[sys,'/','plselin/rstint2/Saturation'])set_param([sys,'/','plselin/rstint2/Saturation'],...		'Lower Limit','0.0',...		'Upper Limit','1.0',...		'position',[305,88,335,112])add_block('built-in/Gain',[sys,'/','plselin/rstint2/Gain2'])set_param([sys,'/','plselin/rstint2/Gain2'],...		'Gain','1000',...		'position',[245,87,270,113])add_block('built-in/Sum',[sys,'/','plselin/rstint2/Sum'])set_param([sys,'/','plselin/rstint2/Sum'],...		'position',[200,90,220,110])add_block('built-in/Constant',[sys,'/','plselin/rstint2/Constant1'])set_param([sys,'/','plselin/rstint2/Constant1'],...		'Value','-0.05',...		'position',[130,35,150,55])add_block('built-in/Dead Zone',[sys,'/','plselin/rstint2/Dead Zone'])set_param([sys,'/','plselin/rstint2/Dead Zone'],...		'Lower_value','0.05',...		'Upper_value','-0.05',...		'position',[130,92,160,118])add_block('built-in/Abs',[sys,'/','plselin/rstint2/Abs'])set_param([sys,'/','plselin/rstint2/Abs'],...		'position',[130,293,160,317])add_line([sys,'/','plselin/rstint2'],[340,100;380,100])add_line([sys,'/','plselin/rstint2'],[275,100;300,100])add_line([sys,'/','plselin/rstint2'],[275,45;360,45;360,90;380,90])add_line([sys,'/','plselin/rstint2'],[345,170;325,170;325,165;290,165])add_line([sys,'/','plselin/rstint2'],[410,95;450,95;450,145;325,145;325,155;290,155])add_line([sys,'/','plselin/rstint2'],[360,300;395,300])add_line([sys,'/','plselin/rstint2'],[225,100;240,100])add_line([sys,'/','plselin/rstint2'],[165,105;195,105])add_line([sys,'/','plselin/rstint2'],[155,45;180,45;180,95;195,95])add_line([sys,'/','plselin/rstint2'],[425,300;465,300;465,170;380,170])add_line([sys,'/','plselin/rstint2'],[465,300;510,300])add_line([sys,'/','plselin/rstint2'],[250,160;225,160;225,250;300,250;300,295;330,295])add_line([sys,'/','plselin/rstint2'],[75,305;125,305])add_line([sys,'/','plselin/rstint2'],[165,305;330,305])add_line([sys,'/','plselin/rstint2'],[195,305;195,255;50,255;50,105;125,105])%     Finished composite block 'plselin/rstint2'.set_param([sys,'/','plselin/rstint2'],...		'position',[385,135,415,185])add_line([sys,'/','plselin'],[320,330;580,330;590,165])add_line([sys,'/','plselin'],[530,220;575,220;575,155;590,155])add_line([sys,'/','plselin'],[410,95;430,95])add_line([sys,'/','plselin'],[470,95;490,95;500,205])add_line([sys,'/','plselin'],[230,385;100,385;100,165;135,165])add_line([sys,'/','plselin'],[630,155;635,155;635,385;475,385])add_line([sys,'/','plselin'],[285,160;310,160])add_line([sys,'/','plselin'],[175,160;210,160;210,230;300,230])add_line([sys,'/','plselin'],[210,160;235,160])add_line([sys,'/','plselin'],[200,115;225,115;225,100;240,100])add_line([sys,'/','plselin'],[445,235;500,235])add_line([sys,'/','plselin'],[350,230;405,230])add_line([sys,'/','plselin'],[210,230;210,275;245,275])add_line([sys,'/','plselin'],[345,275;370,275;370,240;405,240])add_line([sys,'/','plselin'],[280,275;305,275])add_line([sys,'/','plselin'],[440,385;400,385])add_line([sys,'/','plselin'],[350,160;380,160])add_line([sys,'/','plselin'],[420,160;465,160;465,220;500,220])add_line([sys,'/','plselin'],[350,385;270,385])add_line([sys,'/','plselin'],[350,95;375,95])add_line([sys,'/','plselin'],[270,95;310,95])add_line([sys,'/','plselin'],[270,95;275,85;310,85])add_line([sys,'/','plselin'],[290,120;295,120;295,105;310,105])add_line([sys,'/','plselin'],[540,90;570,90;570,145;590,145])add_line([sys,'/','plselin'],[630,155;645,155])add_line([sys,'/','plselin'],[40,155;60,155;60,330;270,330])add_line([sys,'/','plselin'],[60,155;135,155])add_line([sys,'/','plselin'],[60,155;60,115;150,115])add_line([sys,'/','plselin'],[60,115;60,90;240,90])set_param([sys,'/','plselin'],...		'Mask Display','P.G.')%     Finished composite block 'plselin'.set_param([sys,'/','plselin'],...		'hide name',0,...		'position',[20,75,50,105])add_block('built-in/Note',[sys,'/',['This was in ''M1.m''  It is different from the other P.G.s, but it''s mostly the',13,'same as P.G.1, but differs in some of the coefficients for the functions.',13,'(Replaced it by P.G. 1 on 9//9//97)']])set_param([sys,'/',['This was in ''M1.m''  It is different from the other P.G.s, but it''s mostly the',13,'same as P.G.1, but differs in some of the coefficients for the functions.',13,'(Replaced it by P.G. 1 on 9//9//97)']],...		'position',[275,70,280,75])%     Subsystem  'NI1'.new_system([sys,'/','NI1'])set_param([sys,'/','NI1'],'Location',[330,227,780,557])add_block('built-in/Outport',[sys,'/','NI1/out_1'])set_param([sys,'/','NI1/out_1'],...		'position',[415,135,435,155])add_block('built-in/Inport',[sys,'/','NI1/in_1'])set_param([sys,'/','NI1/in_1'],...		'position',[45,55,65,75])add_block('built-in/Sum',[sys,'/','NI1/Sum'])set_param([sys,'/','NI1/Sum'],...		'hide name',0,...		'inputs','+-',...		'position',[280,135,300,155])add_block('built-in/Integrator',[sys,'/','NI1/Integrator'])set_param([sys,'/','NI1/Integrator'],...		'hide name',0,...		'position',[345,135,365,155])add_block('built-in/Product',[sys,'/','NI1/Product'])set_param([sys,'/','NI1/Product'],...		'hide name',0,...		'position',[200,113,230,137])add_block('built-in/Inport',[sys,'/','NI1/from_ratio'])set_param([sys,'/','NI1/from_ratio'],...		'Port','3',...		'position',[35,120,55,140])add_block('built-in/Inport',[sys,'/','NI1/timbal'])set_param([sys,'/','NI1/timbal'],...		'Port','2',...		'position',[35,215,55,235])add_block('built-in/Transport Delay',[sys,'/','NI1/100 ms'])set_param([sys,'/','NI1/100 ms'],...		'Delay Time','0.100',...		'position',[105,115,145,145])add_line([sys,'/','NI1'],[235,125;255,125;255,140;275,140])add_line([sys,'/','NI1'],[370,145;410,145])add_line([sys,'/','NI1'],[305,145;340,145])add_line([sys,'/','NI1'],[70,65;170,65;170,120;195,120])add_line([sys,'/','NI1'],[60,225;255,225;255,150;275,150])add_line([sys,'/','NI1'],[150,130;195,130])add_line([sys,'/','NI1'],[60,130;100,130])set_param([sys,'/','NI1'],...		'Mask Display','Neural\nIntegrator')%     Finished composite block 'NI1'.set_param([sys,'/','NI1'],...		'hide name',0,...		'position',[15,136,70,174])add_block('built-in/Note',[sys,'/',['This was in ''M1.m''  It is almost the same as the NI in the CNLib,',13,'but has a transport delay of 100ms (0.100) on input 3 (''from_ratio'')',13,'(Replaced by LNLib version 9//9//97)']])set_param([sys,'/',['This was in ''M1.m''  It is almost the same as the NI in the CNLib,',13,'but has a transport delay of 100ms (0.100) on input 3 (''from_ratio'')',13,'(Replaced by LNLib version 9//9//97)']],...		'position',[270,135,275,140])%     Subsystem  'Tprime1'.new_system([sys,'/','Tprime1'])set_param([sys,'/','Tprime1'],'Location',[156,134,780,539])add_block('built-in/Step Fcn',[sys,'/','Tprime1/Step Input'])set_param([sys,'/','Tprime1/Step Input'],...		'hide name',0,...		'position',[75,50,95,70])add_block('built-in/Gain',[sys,'/','Tprime1/Gain3'])set_param([sys,'/','Tprime1/Gain3'],...		'hide name',0,...		'Gain','0',...		'position',[120,47,145,73])add_block('built-in/Step Fcn',[sys,'/','Tprime1/Step Input1'])set_param([sys,'/','Tprime1/Step Input1'],...		'hide name',0,...		'position',[75,10,95,30])add_block('built-in/Gain',[sys,'/','Tprime1/Gain2'])set_param([sys,'/','Tprime1/Gain2'],...		'hide name',0,...		'Gain','0',...		'position',[120,7,145,33])add_block('built-in/Gain',[sys,'/','Tprime1/Gain4'])set_param([sys,'/','Tprime1/Gain4'],...		'hide name',0,...		'position',[230,27,255,53])add_block('built-in/Sum',[sys,'/','Tprime1/Sum1'])set_param([sys,'/','Tprime1/Sum1'],...		'hide name',0,...		'position',[190,30,210,50])add_block('built-in/Constant',[sys,'/','Tprime1/Constant'])set_param([sys,'/','Tprime1/Constant'],...		'hide name',0,...		'Value','-1.0',...		'position',[265,157,295,183])add_block('built-in/Gain',[sys,'/','Tprime1/Gain1'])set_param([sys,'/','Tprime1/Gain1'],...		'hide name',0,...		'Gain','1.0',...		'position',[210,225,245,265])add_block('built-in/Inport',[sys,'/','Tprime1/retinal error'])set_param([sys,'/','Tprime1/retinal error'],...		'Port','2',...		'position',[50,200,70,220])add_block('built-in/Sum',[sys,'/','Tprime1/Sum2'])set_param([sys,'/','Tprime1/Sum2'],...		'position',[540,225,560,245])add_block('built-in/Product',[sys,'/','Tprime1/product1'])set_param([sys,'/','Tprime1/product1'],...		'position',[455,109,475,131])add_block('built-in/Abs',[sys,'/','Tprime1/Abs'])set_param([sys,'/','Tprime1/Abs'],...		'hide name',0,...		'position',[365,143,390,167])add_block('built-in/Sum',[sys,'/','Tprime1/Sum3'])set_param([sys,'/','Tprime1/Sum3'],...		'hide name',0,...		'position',[330,145,350,165])add_block('built-in/Sum',[sys,'/','Tprime1/Sum'])set_param([sys,'/','Tprime1/Sum'],...		'hide name',0,...		'position',[155,226,175,264])add_block('built-in/Product',[sys,'/','Tprime1/product2'])set_param([sys,'/','Tprime1/product2'],...		'position',[315,228,345,252])add_block('built-in/Inport',[sys,'/','Tprime1/on//off switch'])set_param([sys,'/','Tprime1/on//off switch'],...		'position',[50,155,70,175])add_block('built-in/Outport',[sys,'/','Tprime1/out_1'])set_param([sys,'/','Tprime1/out_1'],...		'position',[590,225,610,245])add_block('built-in/Inport',[sys,'/','Tprime1/pos. efference'])set_param([sys,'/','Tprime1/pos. efference'],...		'Port','3',...		'position',[50,245,70,265])add_line([sys,'/','Tprime1'],[395,155;405,155;405,125;450,125])add_line([sys,'/','Tprime1'],[300,170;315,170;325,160])add_line([sys,'/','Tprime1'],[355,155;360,155])add_line([sys,'/','Tprime1'],[75,165;185,165;185,205;280,205;280,235;310,235])add_line([sys,'/','Tprime1'],[185,165;185,150;325,150])add_line([sys,'/','Tprime1'],[260,40;330,40;330,115;450,115])add_line([sys,'/','Tprime1'],[480,120;510,120;510,230;535,230])add_line([sys,'/','Tprime1'],[350,240;535,240])add_line([sys,'/','Tprime1'],[250,245;310,245])add_line([sys,'/','Tprime1'],[75,255;150,255])add_line([sys,'/','Tprime1'],[75,210;110,210;110,235;150,235])add_line([sys,'/','Tprime1'],[215,40;225,40])add_line([sys,'/','Tprime1'],[565,235;585,235])add_line([sys,'/','Tprime1'],[150,60;150,45;185,45])add_line([sys,'/','Tprime1'],[150,20;150,35;185,35])add_line([sys,'/','Tprime1'],[100,60;115,60])add_line([sys,'/','Tprime1'],[100,20;115,20])add_line([sys,'/','Tprime1'],[180,245;205,245])set_param([sys,'/','Tprime1'],...		'Mask Display','Target\nPosition\n(Internal)')%     Finished composite block 'Tprime1'.set_param([sys,'/','Tprime1'],...		'hide name',0,...		'position',[15,211,75,259])add_block('built-in/Note',[sys,'/',['This was in ''M1.m'', and is basically the same as the LNLib version',13,'except that here the gains in the upper left corner (following the',13,'step inputs) are set to zero here, and one there.',13,'(Replaced by LNLib version 9//9//97)']])set_param([sys,'/',['This was in ''M1.m'', and is basically the same as the LNLib version',13,'except that here the gains in the upper left corner (following the',13,'step inputs) are set to zero here, and one there.',13,'(Replaced by LNLib version 9//9//97)']],...		'position',[275,205,280,210])%     Subsystem  'trgtpos'.new_system([sys,'/','trgtpos'])set_param([sys,'/','trgtpos'],'Location',[153,147,536,323])add_block('built-in/Step Fcn',[sys,'/','trgtpos/Step Input1'])set_param([sys,'/','trgtpos/Step Input1'],...		'Time','4.0',...		'After','1.0',...		'position',[65,100,85,120])add_block('built-in/Sum',[sys,'/','trgtpos/Sum'])set_param([sys,'/','trgtpos/Sum'],...		'hide name',0,...		'position',[265,65,285,85])add_block('built-in/Step Fcn',[sys,'/','trgtpos/Step Input'])set_param([sys,'/','trgtpos/Step Input'],...		'Time','0',...		'position',[65,30,85,50])add_block('built-in/Gain',[sys,'/','trgtpos/Gain1'])set_param([sys,'/','trgtpos/Gain1'],...		'Gain','0.0',...		'position',[150,97,175,123])add_block('built-in/Gain',[sys,'/','trgtpos/Gain'])set_param([sys,'/','trgtpos/Gain'],...		'Gain','0.0',...		'position',[150,27,175,53])add_block('built-in/Outport',[sys,'/','trgtpos/out_1'])set_param([sys,'/','trgtpos/out_1'],...		'position',[315,65,335,85])add_line([sys,'/','trgtpos'],[290,75;310,75])add_line([sys,'/','trgtpos'],[90,40;145,40])add_line([sys,'/','trgtpos'],[90,110;145,110])add_line([sys,'/','trgtpos'],[180,40;215,40;215,70;260,70])add_line([sys,'/','trgtpos'],[180,110;215,110;215,80;260,80])set_param([sys,'/','trgtpos'],...		'Mask Display','Target\nPosition')%     Finished composite block 'trgtpos'.set_param([sys,'/','trgtpos'],...		'hide name',0,...		'position',[20,315,75,355])add_block('built-in/Note',[sys,'/',['This was in ''M1.m'', and is basically the same as the LNLib version',13,'except that here the gains following the step inputs are set to',13,'zero here, and one there.  (Replaced by LNLib version 9//9//97)']])set_param([sys,'/',['This was in ''M1.m'', and is basically the same as the LNLib version',13,'except that here the gains following the step inputs are set to',13,'zero here, and one there.  (Replaced by LNLib version 9//9//97)']],...		'position',[285,305,290,310])%     Subsystem  'Rst Int (2)'.new_system([sys,'/','Rst Int (2)'])set_param([sys,'/','Rst Int (2)'],'Location',[55,119,670,545])add_block('built-in/Inport',[sys,'/','Rst Int (2)/in_1'])set_param([sys,'/','Rst Int (2)/in_1'],...		'position',[70,230,90,250])add_block('built-in/Note',[sys,'/',['Rst Int (2)/When the input goes to zero, the upper input to product2 goes to one,',13,'closing the loop around the integrator.  When this happens, the output',13,'of the integrator decreases rapidly (large negative gain) to zero.']])set_param([sys,'/',['Rst Int (2)/When the input goes to zero, the upper input to product2 goes to one,',13,'closing the loop around the integrator.  When this happens, the output',13,'of the integrator decreases rapidly (large negative gain) to zero.']],...		'position',[300,344,310,349])add_block('built-in/Note',[sys,'/',['Rst Int (2)/This block is a resettable integrator.  When the input signal is non-zero, the upper',13,'input to product2 is zero.  This effectively opens the loop around the integrator and',13,'the output is the integration of the input.',13,'']])set_param([sys,'/',['Rst Int (2)/This block is a resettable integrator.  When the input signal is non-zero, the upper',13,'input to product2 is zero.  This effectively opens the loop around the integrator and',13,'the output is the integration of the input.',13,'']],...		'position',[295,280,300,285])add_block('built-in/Gain',[sys,'/','Rst Int (2)/Gain2'])set_param([sys,'/','Rst Int (2)/Gain2'],...		'hide name',0,...		'Gain','1000',...		'position',[260,54,310,86])add_block('built-in/Constant',[sys,'/','Rst Int (2)/Constant'])set_param([sys,'/','Rst Int (2)/Constant'],...		'hide name',0,...		'Value','-1',...		'position',[355,15,375,35])add_block('built-in/Sum',[sys,'/','Rst Int (2)/Sum3'])set_param([sys,'/','Rst Int (2)/Sum3'],...		'position',[290,225,310,245])add_block('built-in/Outport',[sys,'/','Rst Int (2)/out_1'])set_param([sys,'/','Rst Int (2)/out_1'],...		'position',[520,190,540,210])add_block('built-in/Integrator',[sys,'/','Rst Int (2)/Integrator'])set_param([sys,'/','Rst Int (2)/Integrator'],...		'position',[400,225,420,245])add_block('built-in/Gain',[sys,'/','Rst Int (2)/Gain'])set_param([sys,'/','Rst Int (2)/Gain'],...		'orientation',2,...		'hide name',0,...		'Gain','1000',...		'position',[350,158,400,192])add_block('built-in/Product',[sys,'/','Rst Int (2)/product2'])set_param([sys,'/','Rst Int (2)/product2'],...		'orientation',2,...		'position',[255,133,285,157])add_block('built-in/Dead Zone',[sys,'/',['Rst Int (2)/(dead zone)',13,'-0.05-->0.05']])set_param([sys,'/',['Rst Int (2)/(dead zone)',13,'-0.05-->0.05']],...		'Lower_value','0.05',...		'Upper_value','-0.05',...		'position',[115,62,145,88])add_block('built-in/Sum',[sys,'/','Rst Int (2)/Sum'])set_param([sys,'/','Rst Int (2)/Sum'],...		'position',[200,60,220,80])add_block('built-in/Saturation',[sys,'/','Rst Int (2)/0-->1'])set_param([sys,'/','Rst Int (2)/0-->1'],...		'Lower Limit','0.0',...		'Upper Limit','1.0',...		'position',[335,58,365,82])add_block('built-in/Sum',[sys,'/','Rst Int (2)/Sum2'])set_param([sys,'/','Rst Int (2)/Sum2'],...		'position',[420,55,440,75])add_block('built-in/Constant',[sys,'/','Rst Int (2)/Constant1'])set_param([sys,'/','Rst Int (2)/Constant1'],...		'hide name',0,...		'Value','-0.05',...		'position',[115,17,155,43])add_line([sys,'/','Rst Int (2)'],[425,235;465,235;465,175;405,175])add_line([sys,'/','Rst Int (2)'],[465,200;515,200])add_line([sys,'/','Rst Int (2)'],[370,70;415,70])add_line([sys,'/','Rst Int (2)'],[315,70;330,70])add_line([sys,'/','Rst Int (2)'],[380,25;395,25;395,60;415,60])add_line([sys,'/','Rst Int (2)'],[345,175;325,175;325,150;290,150])add_line([sys,'/','Rst Int (2)'],[445,65;475,65;475,140;290,140])add_line([sys,'/','Rst Int (2)'],[315,235;395,235])add_line([sys,'/','Rst Int (2)'],[225,70;255,70])add_line([sys,'/','Rst Int (2)'],[150,75;195,75])add_line([sys,'/','Rst Int (2)'],[160,30;180,30;180,65;195,65])add_line([sys,'/','Rst Int (2)'],[250,145;225,145;225,230;285,230])add_line([sys,'/','Rst Int (2)'],[95,240;285,240])add_line([sys,'/','Rst Int (2)'],[195,240;195,160;85,160;85,75;110,75])set_param([sys,'/','Rst Int (2)'],...		'Mask Display','reset\ninteg')%     Finished composite block 'Rst Int (2)'.set_param([sys,'/','Rst Int (2)'],...		'position',[30,388,70,422])%     Subsystem  ['Bi-Directional',13,'resettable integrator'].new_system([sys,'/',['Bi-Directional',13,'resettable integrator']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator']],'Location',[40,75,720,541])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum6']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum6']],...		'position',[575,230,595,250])add_block('built-in/Inport',[sys,'/',['Bi-Directional',13,'resettable integrator/in_1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/in_1']],...		'position',[35,185,55,205])add_block('built-in/Gain',[sys,'/',['Bi-Directional',13,'resettable integrator/Gain3']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Gain3']],...		'hide name',0,...		'Gain','1000',...		'position',[305,274,355,306])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum4']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum4']],...		'position',[335,395,355,415])add_block('built-in/Integrator',[sys,'/',['Bi-Directional',13,'resettable integrator/Integrator1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Integrator1']],...		'position',[445,395,465,415])add_block('built-in/Gain',[sys,'/',['Bi-Directional',13,'resettable integrator/Gain1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Gain1']],...		'orientation',2,...		'hide name',0,...		'Gain','1000',...		'position',[395,348,445,382])add_block('built-in/Product',[sys,'/',['Bi-Directional',13,'resettable integrator/product3']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/product3']],...		'orientation',2,...		'position',[300,328,330,352])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum1']],...		'position',[245,280,265,300])add_block('built-in/Saturation',[sys,'/',['Bi-Directional',13,'resettable integrator/0-->1 ']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/0-->1 ']],...		'Lower Limit','0.0',...		'Upper Limit','1.0',...		'position',[380,278,410,302])add_block('built-in/Constant',[sys,'/',['Bi-Directional',13,'resettable integrator/Constant2']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Constant2']],...		'hide name',0,...		'Value','-0.05',...		'position',[160,247,200,273])add_block('built-in/Constant',[sys,'/',['Bi-Directional',13,'resettable integrator/Constant3']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Constant3']],...		'hide name',0,...		'Value','-1',...		'position',[430,265,450,285])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum5']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum5']],...		'position',[480,275,500,295])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum2']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum2']],...		'position',[460,60,480,80])add_block('built-in/Constant',[sys,'/',['Bi-Directional',13,'resettable integrator/Constant']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Constant']],...		'hide name',0,...		'Value','-1',...		'position',[410,50,430,70])add_block('built-in/Constant',[sys,'/',['Bi-Directional',13,'resettable integrator/Constant1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Constant1']],...		'hide name',0,...		'Value','-0.05',...		'position',[170,32,210,58])add_block('built-in/Saturation',[sys,'/',['Bi-Directional',13,'resettable integrator/0-->1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/0-->1']],...		'Lower Limit','0.0',...		'Upper Limit','1.0',...		'position',[360,63,390,87])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum']],...		'position',[245,65,265,85])add_block('built-in/Dead Zone',[sys,'/',['Bi-Directional',13,'resettable integrator/(dead zone)',13,'-0.05-->0.05']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/(dead zone)',13,'-0.05-->0.05']],...		'Lower_value','0.05',...		'Upper_value','-0.05',...		'position',[180,67,210,93])add_block('built-in/Product',[sys,'/',['Bi-Directional',13,'resettable integrator/product2']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/product2']],...		'orientation',2,...		'position',[280,113,310,137])add_block('built-in/Gain',[sys,'/',['Bi-Directional',13,'resettable integrator/Gain']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Gain']],...		'orientation',2,...		'hide name',0,...		'Gain','1000',...		'position',[375,133,425,167])add_block('built-in/Integrator',[sys,'/',['Bi-Directional',13,'resettable integrator/Integrator']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Integrator']],...		'position',[425,180,445,200])add_block('built-in/Sum',[sys,'/',['Bi-Directional',13,'resettable integrator/Sum3']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Sum3']],...		'position',[315,180,335,200])add_block('built-in/Gain',[sys,'/',['Bi-Directional',13,'resettable integrator/Gain2']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Gain2']],...		'hide name',0,...		'Gain','1000',...		'position',[285,59,335,91])add_block('built-in/Dead Zone',[sys,'/',['Bi-Directional',13,'resettable integrator/(dead zone)',13,'-0.05-->0.05 ']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/(dead zone)',13,'-0.05-->0.05 ']],...		'Lower_value','0.05',...		'Upper_value','-0.05',...		'position',[175,282,205,308])add_block('built-in/Outport',[sys,'/',['Bi-Directional',13,'resettable integrator/out_1']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/out_1']],...		'position',[620,230,640,250])add_block('built-in/Gain',[sys,'/',['Bi-Directional',13,'resettable integrator/Gain4']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Gain4']],...		'orientation',1,...		'hide name',0,...		'Gain','-1',...		'position',[109,230,131,260])add_block('built-in/Gain',[sys,'/',['Bi-Directional',13,'resettable integrator/Gain5']])set_param([sys,'/',['Bi-Directional',13,'resettable integrator/Gain5']],...		'orientation',3,...		'hide name',0,...		'Gain','-1',...		'position',[540,315,560,345])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[60,195;120,195;120,80;175,80])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[60,195;310,195])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[600,240;615,240])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[455,275;475,280])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[415,290;475,290])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[360,290;375,290])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[390,365;370,365;370,345;335,345])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[505,285;520,285;520,335;335,335])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[360,405;440,405])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[270,290;300,290])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[210,295;240,295])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[205,260;225,260;225,285;240,285])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[470,405;510,405;510,365;450,365])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[295,340;270,340;270,400;330,400])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[435,60;445,65;455,65])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[450,190;490,190;490,150;430,150])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[490,174;490,189;540,189;540,235;570,235])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[395,75;455,75])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[340,75;355,75])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[370,150;350,150;350,130;315,130])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[485,70;500,70;500,120;315,120])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[340,190;420,190])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[270,75;280,75])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[215,80;240,80])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[215,45;220,45;220,70;240,70])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[275,125;250,125;250,185;310,185])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[120,190;120,225])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[120,265;120,410;330,410])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[120,295;170,295])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[550,310;550,245;570,245])add_line([sys,'/',['Bi-Directional',13,'resettable integrator']],[505,405;550,405;550,350])set_param([sys,'/',['Bi-Directional',13,'resettable integrator']],...		'Mask Display','Bi-Dir\nRst Int')%     Finished composite block ['Bi-Directional',13,'resettable integrator'].set_param([sys,'/',['Bi-Directional',13,'resettable integrator']],...		'position',[115,384,170,426])add_block('built-in/Note',[sys,'/',['These blocks are clumsy resettable integrators.',13,'The smaller one is only works with positive pulses,',13,'and the "Bi-Dir" one is just a push-pull combo of',13,'the smaller one. (9//24//97)']])set_param([sys,'/',['These blocks are clumsy resettable integrators.',13,'The smaller one is only works with positive pulses,',13,'and the "Bi-Dir" one is just a push-pull combo of',13,'the smaller one. (9//24//97)']],...		'position',[325,375,330,380])%     Subsystem  'thrshn4'.new_system([sys,'/','thrshn4'])set_param([sys,'/','thrshn4'],'Location',[5,124,629,550])add_block('built-in/Inport',[sys,'/','thrshn4/from_fltplstp'])set_param([sys,'/','thrshn4/from_fltplstp'],...		'orientation',2,...		'Port','3',...		'position',[515,370,535,390])add_block('built-in/Inport',[sys,'/','thrshn4/Slip_Vel'])set_param([sys,'/','thrshn4/Slip_Vel'],...		'orientation',2,...		'Port','4',...		'position',[510,305,530,325])add_block('built-in/Fcn',[sys,'/','thrshn4/Fcn'])set_param([sys,'/','thrshn4/Fcn'],...		'orientation',2,...		'hide name',0,...		'Expr','0.00* u[1]',...		'Mask Display','vel\ncorr',...		'position',[340,302,405,328])add_block('built-in/Inport',[sys,'/','thrshn4/from_NI'])set_param([sys,'/','thrshn4/from_NI'],...		'Port','5',...		'position',[90,355,110,375])add_block('built-in/Saturation',[sys,'/','thrshn4/Saturation'])set_param([sys,'/','thrshn4/Saturation'],...		'hide name',0,...		'Lower Limit','-0.0',...		'Upper Limit','1.0',...		'position',[225,63,255,87])add_block('built-in/Sum',[sys,'/','thrshn4/Sum2'])set_param([sys,'/','thrshn4/Sum2'],...		'hide name',0,...		'inputs','+-',...		'position',[185,155,205,175])add_block('built-in/Sum',[sys,'/','thrshn4/Sum3'])set_param([sys,'/','thrshn4/Sum3'],...		'hide name',0,...		'inputs','+-',...		'position',[190,274,215,301])%     Subsystem  'thrshn4/Latch'.new_system([sys,'/','thrshn4/Latch'])set_param([sys,'/','thrshn4/Latch'],'Location',[102,336,551,502])add_block('built-in/Inport',[sys,'/','thrshn4/Latch/in_2'])set_param([sys,'/','thrshn4/Latch/in_2'],...		'Port','2',...		'position',[50,65,70,85])add_block('built-in/Inport',[sys,'/','thrshn4/Latch/in_1'])set_param([sys,'/','thrshn4/Latch/in_1'],...		'position',[20,50,40,70])add_block('built-in/Mux',[sys,'/','thrshn4/Latch/Mux'])set_param([sys,'/','thrshn4/Latch/Mux'],...		'inputs','3',...		'position',[135,59,165,91])add_block('built-in/Outport',[sys,'/','thrshn4/Latch/out_1'])set_param([sys,'/','thrshn4/Latch/out_1'],...		'position',[355,55,375,75])add_block('built-in/Outport',[sys,'/','thrshn4/Latch/out_2'])set_param([sys,'/','thrshn4/Latch/out_2'],...		'Port','2',...		'position',[395,70,415,90])add_block('built-in/Transport Delay',[sys,'/','thrshn4/Latch/Transport Delay'])set_param([sys,'/','thrshn4/Latch/Transport Delay'],...		'orientation',2,...		'Initial Input','ini',...		'position',[250,120,295,150])add_block('built-in/Combinatorial Logic',[sys,'/','thrshn4/Latch/Logic'])set_param([sys,'/','thrshn4/Latch/Logic'],...		'Truth Table','[0 1;1 0;0 1;0 1;1 0;1 0;0 0;0 0]',...		'position',[195,55,250,95])add_block('built-in/Demux',[sys,'/','thrshn4/Latch/Demux'])set_param([sys,'/','thrshn4/Latch/Demux'],...		'outputs','2',...		'position',[275,55,315,90])add_block('built-in/Fcn',[sys,'/','thrshn4/Latch/Fcn'])set_param([sys,'/','thrshn4/Latch/Fcn'],...		'orientation',2,...		'Expr','u[1]>.2',...		'position',[170,123,205,147])add_line([sys,'/','thrshn4/Latch'],[320,80;390,80])add_line([sys,'/','thrshn4/Latch'],[255,75;270,75])add_line([sys,'/','thrshn4/Latch'],[170,75;190,75])add_line([sys,'/','thrshn4/Latch'],[45,60;105,60;105,65;130,65])add_line([sys,'/','thrshn4/Latch'],[75,75;130,75])add_line([sys,'/','thrshn4/Latch'],[245,135;210,135])add_line([sys,'/','thrshn4/Latch'],[165,135;110,135;110,85;130,85])add_line([sys,'/','thrshn4/Latch'],[320,65;350,65])add_line([sys,'/','thrshn4/Latch'],[335,65;335,135;300,135])set_param([sys,'/','thrshn4/Latch'],...		'Mask Display','S  1\n\nR  0',...		'Mask Type','Latch',...		'Mask Dialogue','Latch|Initial State for Output "1":',...		'Mask Translate','ini=(@1~=0);')set_param([sys,'/','thrshn4/Latch'],...		'Mask Help','Latches the S input.  When S (set) is one, the uncomplemented output (1) becomes one.  The output remains one until the R (reset) input becomes one, forcing the output to zero.  If both R and S are one, the latch will be in an undefined state.')set_param([sys,'/','thrshn4/Latch'],...		'Mask Entries','1\/')%     Finished composite block 'thrshn4/Latch'.set_param([sys,'/','thrshn4/Latch'],...		'hide name',0,...		'position',[320,62,355,113])add_block('built-in/Transport Delay',[sys,'/',['thrshn4/Transport',13,'Delay']])set_param([sys,'/',['thrshn4/Transport',13,'Delay']],...		'orientation',2,...		'hide name',0,...		'Delay Time','0.080',...		'Mask Display','80\nms',...		'position',[320,125,355,155])add_block('built-in/Switch',[sys,'/','thrshn4/Switch1'])set_param([sys,'/','thrshn4/Switch1'],...		'position',[140,59,170,91])add_block('built-in/Outport',[sys,'/','thrshn4/to_NI'])set_param([sys,'/','thrshn4/to_NI'],...		'orientation',3,...		'position',[510,30,530,50])add_block('built-in/Logical Operator',[sys,'/',['thrshn4/Logical',13,'Operator']])set_param([sys,'/',['thrshn4/Logical',13,'Operator']],...		'hide name',0,...		'Operator','NOT',...		'Number of Input Ports','1',...		'position',[415,63,445,87])add_block('built-in/Inport',[sys,'/','thrshn4/from_tprime'])set_param([sys,'/','thrshn4/from_tprime'],...		'Port','2',...		'position',[50,270,70,290])add_block('built-in/Constant',[sys,'/','thrshn4/Constant'])set_param([sys,'/','thrshn4/Constant'],...		'Value','0.0',...		'position',[360,205,390,225])add_block('built-in/Switch',[sys,'/','thrshn4/Switch'])set_param([sys,'/','thrshn4/Switch'],...		'hide name',0,...		'position',[420,169,450,201])add_block('built-in/Outport',[sys,'/','thrshn4/to_PG'])set_param([sys,'/','thrshn4/to_PG'],...		'Port','2',...		'position',[510,175,530,195])add_block('built-in/Inport',[sys,'/','thrshn4/threshold'])set_param([sys,'/','thrshn4/threshold'],...		'orientation',2,...		'position',[510,250,530,270])add_block('built-in/Constant',[sys,'/','thrshn4/Constant3'])set_param([sys,'/','thrshn4/Constant3'],...		'hide name',0,...		'Value','0',...		'position',[60,40,80,60])add_block('built-in/Constant',[sys,'/','thrshn4/Constant2'])set_param([sys,'/','thrshn4/Constant2'],...		'hide name',0,...		'position',[60,90,80,110])add_block('built-in/Sum',[sys,'/','thrshn4/Sum1'])set_param([sys,'/','thrshn4/Sum1'],...		'orientation',3,...		'hide name',0,...		'position',[224,210,251,235])add_block('built-in/Sum',[sys,'/','thrshn4/Sum'])set_param([sys,'/','thrshn4/Sum'],...		'orientation',3,...		'hide name',0,...		'inputs','+-',...		'position',[299,220,326,245])add_line([sys,'/','thrshn4'],[175,75;220,75])add_line([sys,'/','thrshn4'],[115,365;155,365;155,170;180,170])add_line([sys,'/','thrshn4'],[210,165;220,165;220,125;35,125;35,75;135,75])add_line([sys,'/','thrshn4'],[75,280;185,280])add_line([sys,'/','thrshn4'],[135,280;135,160;180,160])add_line([sys,'/','thrshn4'],[260,75;315,75])add_line([sys,'/','thrshn4'],[360,75;410,75])add_line([sys,'/','thrshn4'],[375,75;375,140;360,140])add_line([sys,'/','thrshn4'],[450,75;520,75;520,55])add_line([sys,'/','thrshn4'],[85,100;90,100;90,85;135,85])add_line([sys,'/','thrshn4'],[85,50;90,50;90,65;135,65])add_line([sys,'/','thrshn4'],[220,290;230,290;230,265;305,265;305,250])add_line([sys,'/','thrshn4'],[230,265;230,240])add_line([sys,'/','thrshn4'],[315,140;295,140;295,100;315,100])add_line([sys,'/','thrshn4'],[240,205;240,175;415,175])add_line([sys,'/','thrshn4'],[335,315;245,315;245,240])add_line([sys,'/','thrshn4'],[505,315;410,315])add_line([sys,'/','thrshn4'],[395,215;405,215;415,195])add_line([sys,'/','thrshn4'],[315,215;315,185;415,185])add_line([sys,'/','thrshn4'],[505,260;320,250])add_line([sys,'/','thrshn4'],[510,380;170,380;170,295;185,295])add_line([sys,'/','thrshn4'],[455,185;505,185])set_param([sys,'/','thrshn4'],...		'Mask Display','Internal\nMonitor')%     Finished composite block 'thrshn4'.set_param([sys,'/','thrshn4'],...		'orientation',2,...		'hide name',0,...		'position',[40,472,125,528])add_block('built-in/Note',[sys,'/',['This was in m2e2.  Inputs 3 and 5 are reversed from what',13,'is seen in the version in the LNLib, and the "velocity corr" ',13,'(a simple gain) is set to zero here, versus 0.35. (9//25//97)']])set_param([sys,'/',['This was in m2e2.  Inputs 3 and 5 are reversed from what',13,'is seen in the version in the LNLib, and the "velocity corr" ',13,'(a simple gain) is set to zero here, versus 0.35. (9//25//97)']],...		'position',[305,470,310,475])add_block('built-in/Note',[sys,'/',['This was in m2e2. It has an extra switch before the output. ',13,'(9//25//97)']])set_param([sys,'/',['This was in m2e2. It has an extra switch before the output. ',13,'(9//25//97)']],...		'position',[300,555,305,560])%     Subsystem  'ret slip vel'.new_system([sys,'/','ret slip vel'])set_param([sys,'/','ret slip vel'],'Location',[293,271,703,556])add_block('built-in/Constant',[sys,'/','ret slip vel/Constant'])set_param([sys,'/','ret slip vel/Constant'],...		'Value','0.0',...		'position',[175,184,200,206])add_block('built-in/Switch',[sys,'/','ret slip vel/>= 0.0?'])set_param([sys,'/','ret slip vel/>= 0.0?'],...		'Threshold','0.0',...		'position',[260,134,290,166])add_block('built-in/Outport',[sys,'/','ret slip vel/out_1'])set_param([sys,'/','ret slip vel/out_1'],...		'position',[355,140,375,160])add_block('built-in/Inport',[sys,'/','ret slip vel/in_1'])set_param([sys,'/','ret slip vel/in_1'],...		'position',[50,140,70,160])add_block('built-in/Derivative',[sys,'/','ret slip vel/Derivative'])set_param([sys,'/','ret slip vel/Derivative'],...		'position',[125,137,160,163])add_line([sys,'/','ret slip vel'],[205,195;220,195;220,160;255,160])add_line([sys,'/','ret slip vel'],[165,150;255,150])add_line([sys,'/','ret slip vel'],[200,150;200,140;255,140])add_line([sys,'/','ret slip vel'],[295,150;350,150])add_line([sys,'/','ret slip vel'],[75,150;120,150])set_param([sys,'/','ret slip vel'],...		'Mask Display','Retinal\nSlip\nVelocity')%     Finished composite block 'ret slip vel'.set_param([sys,'/','ret slip vel'],...		'hide name',0,...		'position',[35,817,90,863])%     Subsystem  'Tprime'.new_system([sys,'/','Tprime'])set_param([sys,'/','Tprime'],'Location',[156,134,780,539])add_block('built-in/Note',[sys,'/',['Tprime/When light switch is on, the lower input ',13,'to Sum2 will go through (lower product).',13,'When light switch is off, upper input to ',13,'Sum2 will go through (upper product).']])set_param([sys,'/',['Tprime/When light switch is on, the lower input ',13,'to Sum2 will go through (lower product).',13,'When light switch is off, upper input to ',13,'Sum2 will go through (upper product).']],...		'position',[460,35,465,40])add_block('built-in/Note',[sys,'/',['Tprime/For  light off, the internal desired position',13,'is set in this block (with the two steps',13,'blocks here).']])set_param([sys,'/',['Tprime/For  light off, the internal desired position',13,'is set in this block (with the two steps',13,'blocks here).']],...		'position',[180,75,185,80])add_block('built-in/Step Fcn',[sys,'/','Tprime/Step Input'])set_param([sys,'/','Tprime/Step Input'],...		'hide name',0,...		'position',[75,50,95,70])add_block('built-in/Gain',[sys,'/','Tprime/Gain3'])set_param([sys,'/','Tprime/Gain3'],...		'hide name',0,...		'position',[120,47,145,73])add_block('built-in/Step Fcn',[sys,'/','Tprime/Step Input1'])set_param([sys,'/','Tprime/Step Input1'],...		'hide name',0,...		'position',[75,10,95,30])add_block('built-in/Gain',[sys,'/','Tprime/Gain2'])set_param([sys,'/','Tprime/Gain2'],...		'hide name',0,...		'position',[120,7,145,33])add_block('built-in/Gain',[sys,'/','Tprime/Gain4'])set_param([sys,'/','Tprime/Gain4'],...		'hide name',0,...		'position',[230,27,255,53])add_block('built-in/Sum',[sys,'/','Tprime/Sum1'])set_param([sys,'/','Tprime/Sum1'],...		'hide name',0,...		'position',[190,30,210,50])add_block('built-in/Constant',[sys,'/','Tprime/Constant'])set_param([sys,'/','Tprime/Constant'],...		'hide name',0,...		'Value','-1.0',...		'position',[265,157,295,183])add_block('built-in/Note',[sys,'/',['Tprime/Inport1 is from the switch for',13,' light on//off.An input of  ''1''',13,' means lighton and retinal',13,' feedback is used.An input',13,' of ''0'' means light off and',13,' no retinal feedback is used.']])set_param([sys,'/',['Tprime/Inport1 is from the switch for',13,' light on//off.An input of  ''1''',13,' means lighton and retinal',13,' feedback is used.An input',13,' of ''0'' means light off and',13,' no retinal feedback is used.']],...		'position',[315,295,320,300])add_block('built-in/Gain',[sys,'/','Tprime/Gain1'])set_param([sys,'/','Tprime/Gain1'],...		'hide name',0,...		'Gain','1.0',...		'position',[210,225,245,265])add_block('built-in/Inport',[sys,'/','Tprime/retinal error'])set_param([sys,'/','Tprime/retinal error'],...		'Port','2',...		'position',[50,200,70,220])add_block('built-in/Sum',[sys,'/','Tprime/Sum2'])set_param([sys,'/','Tprime/Sum2'],...		'position',[540,225,560,245])add_block('built-in/Product',[sys,'/','Tprime/product1'])set_param([sys,'/','Tprime/product1'],...		'position',[455,109,475,131])add_block('built-in/Abs',[sys,'/','Tprime/Abs'])set_param([sys,'/','Tprime/Abs'],...		'hide name',0,...		'position',[365,143,390,167])add_block('built-in/Sum',[sys,'/','Tprime/Sum3'])set_param([sys,'/','Tprime/Sum3'],...		'hide name',0,...		'position',[330,145,350,165])add_block('built-in/Sum',[sys,'/','Tprime/Sum'])set_param([sys,'/','Tprime/Sum'],...		'hide name',0,...		'position',[155,226,175,264])add_block('built-in/Product',[sys,'/','Tprime/product2'])set_param([sys,'/','Tprime/product2'],...		'position',[315,228,345,252])add_block('built-in/Inport',[sys,'/','Tprime/on//off switch'])set_param([sys,'/','Tprime/on//off switch'],...		'position',[50,155,70,175])add_block('built-in/Outport',[sys,'/','Tprime/out_1'])set_param([sys,'/','Tprime/out_1'],...		'position',[590,225,610,245])add_block('built-in/Inport',[sys,'/','Tprime/pos. efference'])set_param([sys,'/','Tprime/pos. efference'],...		'Port','3',...		'position',[50,245,70,265])add_line([sys,'/','Tprime'],[395,155;405,155;405,125;450,125])add_line([sys,'/','Tprime'],[300,170;315,170;325,160])add_line([sys,'/','Tprime'],[355,155;360,155])add_line([sys,'/','Tprime'],[75,165;185,165;185,205;280,205;280,235;310,235])add_line([sys,'/','Tprime'],[185,165;185,150;325,150])add_line([sys,'/','Tprime'],[260,40;330,40;330,115;450,115])add_line([sys,'/','Tprime'],[480,120;510,120;510,230;535,230])add_line([sys,'/','Tprime'],[350,240;535,240])add_line([sys,'/','Tprime'],[250,245;310,245])add_line([sys,'/','Tprime'],[75,255;150,255])add_line([sys,'/','Tprime'],[75,210;110,210;110,235;150,235])add_line([sys,'/','Tprime'],[215,40;225,40])add_line([sys,'/','Tprime'],[565,235;585,235])add_line([sys,'/','Tprime'],[150,60;150,45;185,45])add_line([sys,'/','Tprime'],[150,20;150,35;185,35])add_line([sys,'/','Tprime'],[100,60;115,60])add_line([sys,'/','Tprime'],[100,20;115,20])add_line([sys,'/','Tprime'],[180,245;205,245])set_param([sys,'/','Tprime'],...		'Mask Display','Target\nPosition\n(Internal)')%     Finished composite block 'Tprime'.set_param([sys,'/','Tprime'],...		'position',[30,726,90,774])add_block('built-in/Note',[sys,'/',['Replaced the amazingly over-complex(albeit working)',13,' switch "logic" with a much more reasonable single',13,'simulink switch block (9//25//97)']])set_param([sys,'/',['Replaced the amazingly over-complex(albeit working)',13,' switch "logic" with a much more reasonable single',13,'simulink switch block (9//25//97)']],...		'position',[280,725,285,730])add_block('built-in/Note',[sys,'/',['Dan''s Discards.  Stuff stripped from the models//libraries',13,'for reasons of inconsistency or poor implementation']])set_param([sys,'/',['Dan''s Discards.  Stuff stripped from the models//libraries',13,'for reasons of inconsistency or poor implementation']],...		'Font Weight','bold',...		'Font Size',12,...		'position',[250,20,255,25])%     Subsystem  'flat pulse step'.new_system([sys,'/','flat pulse step'])set_param([sys,'/','flat pulse step'],'Location',[155,62,780,424])%     Subsystem  'flat pulse step/Rst Int'.new_system([sys,'/','flat pulse step/Rst Int'])set_param([sys,'/','flat pulse step/Rst Int'],'Location',[116,97,731,523])add_block('built-in/Product',[sys,'/','flat pulse step/Rst Int/product2'])set_param([sys,'/','flat pulse step/Rst Int/product2'],...		'orientation',2,...		'position',[255,113,285,137])add_block('built-in/Gain',[sys,'/','flat pulse step/Rst Int/Gain'])set_param([sys,'/','flat pulse step/Rst Int/Gain'],...		'orientation',2,...		'hide name',0,...		'Gain','500',...		'position',[370,153,420,187])add_block('built-in/Integrator',[sys,'/','flat pulse step/Rst Int/Integrator'])set_param([sys,'/','flat pulse step/Rst Int/Integrator'],...		'position',[400,225,420,245])add_block('built-in/Outport',[sys,'/','flat pulse step/Rst Int/out_1'])set_param([sys,'/','flat pulse step/Rst Int/out_1'],...		'position',[520,190,540,210])add_block('built-in/Sum',[sys,'/','flat pulse step/Rst Int/Sum3'])set_param([sys,'/','flat pulse step/Rst Int/Sum3'],...		'inputs','-+',...		'position',[290,225,310,245])add_block('built-in/Note',[sys,'/',['flat pulse step/Rst Int/This block is a resettable integrator.  When the input signal is non-zero, the upper',13,'input to product2 is zero.  This opens the loop around the integrator so',13,'the output is the integration of the input.',13,'']])set_param([sys,'/',['flat pulse step/Rst Int/This block is a resettable integrator.  When the input signal is non-zero, the upper',13,'input to product2 is zero.  This opens the loop around the integrator so',13,'the output is the integration of the input.',13,'']],...		'position',[295,280,300,285])add_block('built-in/Note',[sys,'/',['flat pulse step/Rst Int/When the input goes to zero, the upper input to product2 is one,',13,'closing the loop around the integrator.  When this happens, the output',13,'of the integrator decreases rapidly (large negative gain) to zero.']])set_param([sys,'/',['flat pulse step/Rst Int/When the input goes to zero, the upper input to product2 is one,',13,'closing the loop around the integrator.  When this happens, the output',13,'of the integrator decreases rapidly (large negative gain) to zero.']],...		'position',[300,344,310,349])add_block('built-in/Inport',[sys,'/','flat pulse step/Rst Int/in_1'])set_param([sys,'/','flat pulse step/Rst Int/in_1'],...		'position',[70,230,90,250])%     Subsystem  'flat pulse step/Rst Int/Sign'.new_system([sys,'/','flat pulse step/Rst Int/Sign'])set_param([sys,'/','flat pulse step/Rst Int/Sign'],'Location',[159,417,467,586])add_block('built-in/Outport',[sys,'/','flat pulse step/Rst Int/Sign/out_1'])set_param([sys,'/','flat pulse step/Rst Int/Sign/out_1'],...		'position',[265,70,285,90])add_block('built-in/Inport',[sys,'/','flat pulse step/Rst Int/Sign/in_1'])set_param([sys,'/','flat pulse step/Rst Int/Sign/in_1'],...		'position',[35,30,55,50])add_block('built-in/Relational Operator',[sys,'/',['flat pulse step/Rst Int/Sign/Relational',13,'Operator']])set_param([sys,'/',['flat pulse step/Rst Int/Sign/Relational',13,'Operator']],...		'Operator','>',...		'position',[140,32,170,63])add_block('built-in/Sum',[sys,'/','flat pulse step/Rst Int/Sign/Sum'])set_param([sys,'/','flat pulse step/Rst Int/Sign/Sum'],...		'inputs','+-',...		'position',[215,64,235,91])add_block('built-in/Relational Operator',[sys,'/',['flat pulse step/Rst Int/Sign/Relational',13,'Operator1']])set_param([sys,'/',['flat pulse step/Rst Int/Sign/Relational',13,'Operator1']],...		'Operator','<',...		'position',[140,92,170,123])add_block('built-in/Constant',[sys,'/','flat pulse step/Rst Int/Sign/Constant'])set_param([sys,'/','flat pulse step/Rst Int/Sign/Constant'],...		'Value','0',...		'position',[65,105,85,125])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[60,40;135,40])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[95,40;95,100;135,100])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[90,115;135,115])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[110,115;110,55;135,55])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[175,110;185,110;185,85;210,85])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[175,50;185,50;185,70;210,70])add_line([sys,'/','flat pulse step/Rst Int/Sign'],[240,80;260,80])set_param([sys,'/','flat pulse step/Rst Int/Sign'],...		'Mask Display','plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])',...		'Mask Type','Sign',...		'Mask Dialogue','y = sign(x)')set_param([sys,'/','flat pulse step/Rst Int/Sign'],...		'Mask Help','Sign Function:\n\t\t\ty = 1 if x > 0\n\t\t\ty = 0 if x = 0\n\t\t\ty = -1 if x < 0')%     Finished composite block 'flat pulse step/Rst Int/Sign'.set_param([sys,'/','flat pulse step/Rst Int/Sign'],...		'position',[215,37,245,63])add_block('built-in/Abs',[sys,'/','flat pulse step/Rst Int/Abs'])set_param([sys,'/','flat pulse step/Rst Int/Abs'],...		'position',[270,38,300,62])add_block('built-in/Switch',[sys,'/','flat pulse step/Rst Int/Switch'])set_param([sys,'/','flat pulse step/Rst Int/Switch'],...		'Threshold','0.5',...		'position',[395,34,425,66])add_block('built-in/Constant',[sys,'/','flat pulse step/Rst Int/Constant1'])set_param([sys,'/','flat pulse step/Rst Int/Constant1'],...		'hide name',0,...		'position',[335,60,355,80])add_block('built-in/Constant',[sys,'/','flat pulse step/Rst Int/Constant'])set_param([sys,'/','flat pulse step/Rst Int/Constant'],...		'hide name',0,...		'Value','0',...		'position',[330,15,350,35])add_line([sys,'/','flat pulse step/Rst Int'],[250,125;225,125;225,230;285,230])add_line([sys,'/','flat pulse step/Rst Int'],[315,235;395,235])add_line([sys,'/','flat pulse step/Rst Int'],[425,235;465,235;465,170;425,170])add_line([sys,'/','flat pulse step/Rst Int'],[465,200;515,200])add_line([sys,'/','flat pulse step/Rst Int'],[95,240;285,240])add_line([sys,'/','flat pulse step/Rst Int'],[165,240;165,50;210,50])add_line([sys,'/','flat pulse step/Rst Int'],[305,50;390,50])add_line([sys,'/','flat pulse step/Rst Int'],[250,50;265,50])add_line([sys,'/','flat pulse step/Rst Int'],[365,170;340,170;340,130;290,130])add_line([sys,'/','flat pulse step/Rst Int'],[355,25;370,25;370,40;390,40])add_line([sys,'/','flat pulse step/Rst Int'],[360,70;370,70;370,60;390,60])add_line([sys,'/','flat pulse step/Rst Int'],[430,50;460,50;460,120;290,120])set_param([sys,'/','flat pulse step/Rst Int'],...		'Mask Display','reset\ninteg')%     Finished composite block 'flat pulse step/Rst Int'.set_param([sys,'/','flat pulse step/Rst Int'],...		'position',[250,128,290,162])add_block('built-in/Outport',[sys,'/','flat pulse step/out_1'])set_param([sys,'/','flat pulse step/out_1'],...		'position',[530,185,550,205])add_block('built-in/Switch',[sys,'/','flat pulse step/>= 0.002?'])set_param([sys,'/','flat pulse step/>= 0.002?'],...		'Threshold','0.002',...		'position',[460,179,490,211])add_block('built-in/Gain',[sys,'/','flat pulse step/Gain'])set_param([sys,'/','flat pulse step/Gain'],...		'hide name',0,...		'Gain','5.10',...		'position',[165,128,205,162])add_block('built-in/Inport',[sys,'/','flat pulse step/pulse'])set_param([sys,'/','flat pulse step/pulse'],...		'position',[85,185,105,205])add_block('built-in/Sum',[sys,'/','flat pulse step/Sum'])set_param([sys,'/','flat pulse step/Sum'],...		'hide name',0,...		'inputs','-+',...		'position',[355,136,380,174])add_block('built-in/Inport',[sys,'/','flat pulse step/NI'])set_param([sys,'/','flat pulse step/NI'],...		'Port','2',...		'position',[85,240,105,260])add_block('built-in/Note',[sys,'/',['flat pulse step/When the pulse is over,  Input 2 of the switch goes to zero, causing input 3',13,'(which is the output of the NI) to be outputted.  Also when the pulse is over,',13,'the input to the resettable integrator goes to zero and it resets.']])set_param([sys,'/',['flat pulse step/When the pulse is over,  Input 2 of the switch goes to zero, causing input 3',13,'(which is the output of the NI) to be outputted.  Also when the pulse is over,',13,'the input to the resettable integrator goes to zero and it resets.']],...		'position',[265,280,310,290])add_block('built-in/Note',[sys,'/','flat pulse step/This block is used to produce a flat pulse step.  '])set_param([sys,'/','flat pulse step/This block is used to produce a flat pulse step.  '],...		'position',[305,20,310,25])add_block('built-in/Note',[sys,'/',['flat pulse step/During a pulse, input 2 of the switch exceeds the threshold (0)',13,'This causes input 1 of the switch to be sent to the output.  Input 1',13,'is the output of the neural integrator (NI), minus the signal which would',13,'be integrated during the pulse. ']])set_param([sys,'/',['flat pulse step/During a pulse, input 2 of the switch exceeds the threshold (0)',13,'This causes input 1 of the switch to be sent to the output.  Input 1',13,'is the output of the neural integrator (NI), minus the signal which would',13,'be integrated during the pulse. ']],...		'position',[295,50,300,55])add_line([sys,'/','flat pulse step'],[110,250;425,250;425,205;455,205])add_line([sys,'/','flat pulse step'],[315,250;315,165;350,165])add_line([sys,'/','flat pulse step'],[385,155;425,155;425,185;455,185])add_line([sys,'/','flat pulse step'],[110,195;455,195])add_line([sys,'/','flat pulse step'],[150,195;160,145])add_line([sys,'/','flat pulse step'],[295,145;350,145])add_line([sys,'/','flat pulse step'],[210,145;245,145])add_line([sys,'/','flat pulse step'],[495,195;525,195])set_param([sys,'/','flat pulse step'],...		'Mask Display','Flat\nPulse\nStep')%     Finished composite block 'flat pulse step'.set_param([sys,'/','flat pulse step'],...		'hide name',0,...		'position',[45,625,90,680])add_block('built-in/Note',[sys,'/',['This is the version from LNLib.  I have modified the switch so that',13,'it is capable of detecting pulses of both polarities.  (10//2//97)']])set_param([sys,'/',['This is the version from LNLib.  I have modified the switch so that',13,'it is capable of detecting pulses of both polarities.  (10//2//97)']],...		'position',[280,620,285,625])%     Subsystem  'fltplstp'.new_system([sys,'/','fltplstp'])set_param([sys,'/','fltplstp'],'Location',[90,217,593,541])add_block('built-in/Constant',[sys,'/','fltplstp/Constant'])set_param([sys,'/','fltplstp/Constant'],...		'hide name',0,...		'Value','-0.35',...		'position',[345,185,380,205])add_block('built-in/Outport',[sys,'/','fltplstp/out_1'])set_param([sys,'/','fltplstp/out_1'],...		'position',[470,135,490,155])add_block('built-in/Switch',[sys,'/','fltplstp/Switch1'])set_param([sys,'/','fltplstp/Switch1'],...		'hide name',0,...		'Threshold','-0.34',...		'position',[410,129,440,161])add_block('built-in/Switch',[sys,'/','fltplstp/Switch'])set_param([sys,'/','fltplstp/Switch'],...		'hide name',0,...		'Threshold','0.000',...		'position',[325,129,355,161])add_block('built-in/Inport',[sys,'/','fltplstp/in_2'])set_param([sys,'/','fltplstp/in_2'],...		'Port','2',...		'position',[30,105,50,125])add_block('built-in/Gain',[sys,'/','fltplstp/Gain'])set_param([sys,'/','fltplstp/Gain'],...		'hide name',0,...		'Gain','5.10',...		'position',[135,48,175,82])add_block('built-in/Sum',[sys,'/','fltplstp/Sum'])set_param([sys,'/','fltplstp/Sum'],...		'inputs','-+',...		'position',[260,100,280,120])%     Subsystem  'fltplstp/Rst Int'.new_system([sys,'/','fltplstp/Rst Int'])set_param([sys,'/','fltplstp/Rst Int'],'Location',[116,97,731,523])add_block('built-in/Product',[sys,'/','fltplstp/Rst Int/product2'])set_param([sys,'/','fltplstp/Rst Int/product2'],...		'orientation',2,...		'position',[255,113,285,137])add_block('built-in/Gain',[sys,'/','fltplstp/Rst Int/Gain'])set_param([sys,'/','fltplstp/Rst Int/Gain'],...		'orientation',2,...		'hide name',0,...		'Gain','500',...		'position',[370,153,420,187])add_block('built-in/Integrator',[sys,'/','fltplstp/Rst Int/Integrator'])set_param([sys,'/','fltplstp/Rst Int/Integrator'],...		'position',[400,225,420,245])add_block('built-in/Outport',[sys,'/','fltplstp/Rst Int/out_1'])set_param([sys,'/','fltplstp/Rst Int/out_1'],...		'position',[520,190,540,210])add_block('built-in/Sum',[sys,'/','fltplstp/Rst Int/Sum3'])set_param([sys,'/','fltplstp/Rst Int/Sum3'],...		'inputs','-+',...		'position',[290,225,310,245])add_block('built-in/Note',[sys,'/',['fltplstp/Rst Int/This block is a resettable integrator.  When the input signal is non-zero, the upper',13,'input to product2 is zero.  This opens the loop around the integrator so',13,'the output is the integration of the input.',13,'']])set_param([sys,'/',['fltplstp/Rst Int/This block is a resettable integrator.  When the input signal is non-zero, the upper',13,'input to product2 is zero.  This opens the loop around the integrator so',13,'the output is the integration of the input.',13,'']],...		'position',[295,280,300,285])add_block('built-in/Note',[sys,'/',['fltplstp/Rst Int/When the input goes to zero, the upper input to product2 is one,',13,'closing the loop around the integrator.  When this happens, the output',13,'of the integrator decreases rapidly (large negative gain) to zero.']])set_param([sys,'/',['fltplstp/Rst Int/When the input goes to zero, the upper input to product2 is one,',13,'closing the loop around the integrator.  When this happens, the output',13,'of the integrator decreases rapidly (large negative gain) to zero.']],...		'position',[300,344,310,349])add_block('built-in/Inport',[sys,'/','fltplstp/Rst Int/in_1'])set_param([sys,'/','fltplstp/Rst Int/in_1'],...		'position',[70,230,90,250])%     Subsystem  'fltplstp/Rst Int/Sign'.new_system([sys,'/','fltplstp/Rst Int/Sign'])set_param([sys,'/','fltplstp/Rst Int/Sign'],'Location',[159,417,467,586])add_block('built-in/Outport',[sys,'/','fltplstp/Rst Int/Sign/out_1'])set_param([sys,'/','fltplstp/Rst Int/Sign/out_1'],...		'position',[265,70,285,90])add_block('built-in/Inport',[sys,'/','fltplstp/Rst Int/Sign/in_1'])set_param([sys,'/','fltplstp/Rst Int/Sign/in_1'],...		'position',[35,30,55,50])add_block('built-in/Relational Operator',[sys,'/',['fltplstp/Rst Int/Sign/Relational',13,'Operator']])set_param([sys,'/',['fltplstp/Rst Int/Sign/Relational',13,'Operator']],...		'Operator','>',...		'position',[140,32,170,63])add_block('built-in/Sum',[sys,'/','fltplstp/Rst Int/Sign/Sum'])set_param([sys,'/','fltplstp/Rst Int/Sign/Sum'],...		'inputs','+-',...		'position',[215,64,235,91])add_block('built-in/Relational Operator',[sys,'/',['fltplstp/Rst Int/Sign/Relational',13,'Operator1']])set_param([sys,'/',['fltplstp/Rst Int/Sign/Relational',13,'Operator1']],...		'Operator','<',...		'position',[140,92,170,123])add_block('built-in/Constant',[sys,'/','fltplstp/Rst Int/Sign/Constant'])set_param([sys,'/','fltplstp/Rst Int/Sign/Constant'],...		'Value','0',...		'position',[65,105,85,125])add_line([sys,'/','fltplstp/Rst Int/Sign'],[60,40;135,40])add_line([sys,'/','fltplstp/Rst Int/Sign'],[95,40;95,100;135,100])add_line([sys,'/','fltplstp/Rst Int/Sign'],[90,115;135,115])add_line([sys,'/','fltplstp/Rst Int/Sign'],[110,115;110,55;135,55])add_line([sys,'/','fltplstp/Rst Int/Sign'],[175,110;185,110;185,85;210,85])add_line([sys,'/','fltplstp/Rst Int/Sign'],[175,50;185,50;185,70;210,70])add_line([sys,'/','fltplstp/Rst Int/Sign'],[240,80;260,80])set_param([sys,'/','fltplstp/Rst Int/Sign'],...		'Mask Display','plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])',...		'Mask Type','Sign',...		'Mask Dialogue','y = sign(x)')set_param([sys,'/','fltplstp/Rst Int/Sign'],...		'Mask Help','Sign Function:\n\t\t\ty = 1 if x > 0\n\t\t\ty = 0 if x = 0\n\t\t\ty = -1 if x < 0')%     Finished composite block 'fltplstp/Rst Int/Sign'.set_param([sys,'/','fltplstp/Rst Int/Sign'],...		'position',[215,37,245,63])add_block('built-in/Abs',[sys,'/','fltplstp/Rst Int/Abs'])set_param([sys,'/','fltplstp/Rst Int/Abs'],...		'position',[270,38,300,62])add_block('built-in/Switch',[sys,'/','fltplstp/Rst Int/Switch'])set_param([sys,'/','fltplstp/Rst Int/Switch'],...		'Threshold','0.5',...		'position',[395,34,425,66])add_block('built-in/Constant',[sys,'/','fltplstp/Rst Int/Constant1'])set_param([sys,'/','fltplstp/Rst Int/Constant1'],...		'hide name',0,...		'position',[335,60,355,80])add_block('built-in/Constant',[sys,'/','fltplstp/Rst Int/Constant'])set_param([sys,'/','fltplstp/Rst Int/Constant'],...		'hide name',0,...		'Value','0',...		'position',[330,15,350,35])add_line([sys,'/','fltplstp/Rst Int'],[250,125;225,125;225,230;285,230])add_line([sys,'/','fltplstp/Rst Int'],[315,235;395,235])add_line([sys,'/','fltplstp/Rst Int'],[425,235;465,235;465,170;425,170])add_line([sys,'/','fltplstp/Rst Int'],[465,200;515,200])add_line([sys,'/','fltplstp/Rst Int'],[95,240;285,240])add_line([sys,'/','fltplstp/Rst Int'],[165,240;165,50;210,50])add_line([sys,'/','fltplstp/Rst Int'],[305,50;390,50])add_line([sys,'/','fltplstp/Rst Int'],[250,50;265,50])add_line([sys,'/','fltplstp/Rst Int'],[365,170;340,170;340,130;290,130])add_line([sys,'/','fltplstp/Rst Int'],[355,25;370,25;370,40;390,40])add_line([sys,'/','fltplstp/Rst Int'],[360,70;370,70;370,60;390,60])add_line([sys,'/','fltplstp/Rst Int'],[430,50;460,50;460,120;290,120])set_param([sys,'/','fltplstp/Rst Int'],...		'Mask Display','reset\ninteg')%     Finished composite block 'fltplstp/Rst Int'.set_param([sys,'/','fltplstp/Rst Int'],...		'hide name',0,...		'position',[190,48,230,82])add_block('built-in/Inport',[sys,'/','fltplstp/in_1'])set_param([sys,'/','fltplstp/in_1'],...		'position',[30,55,50,75])add_line([sys,'/','fltplstp'],[55,65;130,65])add_line([sys,'/','fltplstp'],[100,65;100,145;320,145])add_line([sys,'/','fltplstp'],[385,195;385,155;405,155])add_line([sys,'/','fltplstp'],[360,145;360,135;405,135])add_line([sys,'/','fltplstp'],[360,145;405,145])add_line([sys,'/','fltplstp'],[445,145;465,145])add_line([sys,'/','fltplstp'],[285,110;295,110;295,135;320,135])add_line([sys,'/','fltplstp'],[180,65;185,65])add_line([sys,'/','fltplstp'],[55,115;255,115])add_line([sys,'/','fltplstp'],[85,115;85,155;320,155])add_line([sys,'/','fltplstp'],[235,65;245,65;255,105])set_param([sys,'/','fltplstp'],...		'Mask Display','Flat\nPulse\nStep')%     Finished composite block 'fltplstp'.set_param([sys,'/','fltplstp'],...		'hide name',0,...		'position',[50,559,90,606])%     Subsystem  'Ret Slip Vel'.new_system([sys,'/','Ret Slip Vel'])set_param([sys,'/','Ret Slip Vel'],'Location',[37,77,496,377])add_block('built-in/Constant',[sys,'/','Ret Slip Vel/Constant'])set_param([sys,'/','Ret Slip Vel/Constant'],...		'Value','0.0',...		'position',[40,127,70,153])add_block('built-in/Inport',[sys,'/','Ret Slip Vel/input'])set_param([sys,'/','Ret Slip Vel/input'],...		'position',[50,190,70,210])add_block('built-in/Derivative',[sys,'/','Ret Slip Vel/Derivative'])set_param([sys,'/','Ret Slip Vel/Derivative'],...		'position',[120,184,155,216])add_block('built-in/Switch',[sys,'/','Ret Slip Vel/>=0.0?'])set_param([sys,'/','Ret Slip Vel/>=0.0?'],...		'position',[255,184,285,216])add_block('built-in/Outport',[sys,'/','Ret Slip Vel/output'])set_param([sys,'/','Ret Slip Vel/output'],...		'position',[335,190,355,210])add_block('built-in/Note',[sys,'/',['Ret Slip Vel/This block is used to output only the slow-phase slip velocity in LMLN.',13,'The input is the retinal error.  This is differentiated and sent to the switch.']])set_param([sys,'/',['Ret Slip Vel/This block is used to output only the slow-phase slip velocity in LMLN.',13,'The input is the retinal error.  This is differentiated and sent to the switch.']],...		'position',[225,25,230,30])add_block('built-in/Note',[sys,'/',['Ret Slip Vel/If the derivative is greater than the threshold (say 0), then the upper input (0)',13,'is sent to the output.  Otherwise, the lower input to the switch is sent to the output.']])set_param([sys,'/',['Ret Slip Vel/If the derivative is greater than the threshold (say 0), then the upper input (0)',13,'is sent to the output.  Otherwise, the lower input to the switch is sent to the output.']],...		'position',[225,65,230,70])add_line([sys,'/','Ret Slip Vel'],[160,200;250,200])add_line([sys,'/','Ret Slip Vel'],[185,200;185,210;250,210])add_line([sys,'/','Ret Slip Vel'],[75,200;115,200])add_line([sys,'/','Ret Slip Vel'],[290,200;330,200])add_line([sys,'/','Ret Slip Vel'],[75,140;185,140;185,190;250,190])set_param([sys,'/','Ret Slip Vel'],...		'Mask Display','Retinal\nSlip\nVelocity')%     Finished composite block 'Ret Slip Vel'.set_param([sys,'/','Ret Slip Vel'],...		'position',[35,881,95,929])add_block('built-in/Note',[sys,'/',['Two versions of this, neither works correctly, to convert',13,' a pos signal to a velocity signal.  One version only works',13,'with positive signals, the other with negative signals. (9//26//97)']])set_param([sys,'/',['Two versions of this, neither works correctly, to convert',13,' a pos signal to a velocity signal.  One version only works',13,'with positive signals, the other with negative signals. (9//26//97)']],...		'position',[300,840,305,845])drawnow% Return any arguments.if (nargin | nargout)	% Must use feval here to access system in memory	if (nargin > 3)		if (flag == 0)			eval(['[ret,x0,str,ts,xts]=',sys,'(t,x,u,flag);'])		else			eval(['ret =', sys,'(t,x,u,flag);'])		end	else		[ret,x0,str,ts,xts] = feval(sys);	endelse	drawnow % Flash up the model and execute load callbackend
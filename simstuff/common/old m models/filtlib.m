function [ret,x0,str,ts,xts]=filtlib(t,x,u,flag);%FILTLIB	is the M-file description of the SIMULINK system named FILTLIB.%	The block-diagram can be displayed by typing: FILTLIB.%%	SYS=FILTLIB(T,X,U,FLAG) returns depending on FLAG certain%	system values given time point, T, current state vector, X,%	and input vector, U.%	FLAG is used to indicate the type of output to be returned in SYS.%%	Setting FLAG=1 causes FILTLIB to return state derivatives, FLAG=2%	discrete states, FLAG=3 system outputs and FLAG=4 next sample%	time. For more information and other options see SFUNC.%%	Calling FILTLIB with a FLAG of zero:%	[SIZES]=FILTLIB([],[],[],0),  returns a vector, SIZES, which%	contains the sizes of the state vector and other parameters.%		SIZES(1) number of states%		SIZES(2) number of discrete states%		SIZES(3) number of outputs%		SIZES(4) number of inputs%		SIZES(5) number of roots (currently unsupported)%		SIZES(6) direct feedthrough flag%		SIZES(7) number of sample times%%	For the definition of other parameters in SIZES, see SFUNC.%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.% Note: This M-file is only used for saving graphical information;%       after the model is loaded into memory an internal model%       representation is used.% the system will take on the name of this mfile:sys = mfilename;new_system(sys)simver(1.3)if (0 == (nargin + nargout))     set_param(sys,'Location',[100,100,415,501])     open_system(sys)end;set_param(sys,'algorithm',     'RK-45')set_param(sys,'Start time',    '0.0')set_param(sys,'Stop time',     '999999')set_param(sys,'Min step size', '0.0001')set_param(sys,'Max step size', '10')set_param(sys,'Relative error','1e-3')set_param(sys,'Return vars',   '')%     Subsystem  '7-MA'.new_system([sys,'/','7-MA'])set_param([sys,'/','7-MA'],'Location',[66,260,590,527])add_block('built-in/Note',[sys,'/','7-MA/7-pt moving average filter.'])set_param([sys,'/','7-MA/7-pt moving average filter.'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[265,10,270,15])add_block('built-in/Constant',[sys,'/','7-MA/Constant'])set_param([sys,'/','7-MA/Constant'],...		'hide name',0,...		'Value','1/7',...		'position',[160,212,190,238])add_block('built-in/Outport',[sys,'/','7-MA/out_1'])set_param([sys,'/','7-MA/out_1'],...		'position',[320,210,340,230])add_block('built-in/Product',[sys,'/','7-MA/Product'])set_param([sys,'/','7-MA/Product'],...		'hide name',0,...		'position',[260,208,290,232])add_block('built-in/Inport',[sys,'/','7-MA/in_1'])set_param([sys,'/','7-MA/in_1'],...		'position',[35,65,55,85])add_block('built-in/Memory',[sys,'/','7-MA/Memory'])set_param([sys,'/','7-MA/Memory'],...		'hide name',0,...		'position',[190,60,230,90])add_block('built-in/Memory',[sys,'/','7-MA/Memory1'])set_param([sys,'/','7-MA/Memory1'],...		'hide name',0,...		'position',[130,60,170,90])add_block('built-in/Memory',[sys,'/','7-MA/Memory2'])set_param([sys,'/','7-MA/Memory2'],...		'hide name',0,...		'position',[250,60,290,90])add_block('built-in/Memory',[sys,'/','7-MA/Memory3'])set_param([sys,'/','7-MA/Memory3'],...		'hide name',0,...		'position',[310,60,350,90])add_block('built-in/Sum',[sys,'/','7-MA/Sum'])set_param([sys,'/','7-MA/Sum'],...		'orientation',1,...		'hide name',0,...		'inputs','+++++++',...		'position',[207,170,283,190])add_block('built-in/Memory',[sys,'/','7-MA/Memory5'])set_param([sys,'/','7-MA/Memory5'],...		'hide name',0,...		'position',[440,60,480,90])add_block('built-in/Memory',[sys,'/','7-MA/Memory4'])set_param([sys,'/','7-MA/Memory4'],...		'hide name',0,...		'position',[380,60,420,90])add_line([sys,'/','7-MA'],[485,75;495,75;495,150;275,150;275,165])add_line([sys,'/','7-MA'],[425,75;425,135;265,135;265,165])add_line([sys,'/','7-MA'],[425,75;435,75])add_line([sys,'/','7-MA'],[355,75;375,75])add_line([sys,'/','7-MA'],[355,75;355,120;255,120;255,165])add_line([sys,'/','7-MA'],[60,75;125,75])add_line([sys,'/','7-MA'],[100,75;100,110;215,110;215,165])add_line([sys,'/','7-MA'],[235,75;235,165])add_line([sys,'/','7-MA'],[295,75;295,105;245,105;245,165])add_line([sys,'/','7-MA'],[175,75;175,100;225,100;225,165])add_line([sys,'/','7-MA'],[295,75;305,75])add_line([sys,'/','7-MA'],[235,75;245,75])add_line([sys,'/','7-MA'],[175,75;185,75])add_line([sys,'/','7-MA'],[245,195;255,215])add_line([sys,'/','7-MA'],[295,220;315,220])add_line([sys,'/','7-MA'],[195,225;255,225])set_param([sys,'/','7-MA'],...		'Mask Display','7-MA')%     Finished composite block '7-MA'.set_param([sys,'/','7-MA'],...		'position',[155,45,195,85])%     Subsystem  '7-Median'.new_system([sys,'/','7-Median'])set_param([sys,'/','7-Median'],'Location',[67,197,591,485])add_block('built-in/Note',[sys,'/','7-Median/7-pt median filter'])set_param([sys,'/','7-Median/7-pt median filter'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[255,5,260,10])add_block('built-in/MATLAB Fcn',[sys,'/','7-Median/MATLAB Fcn'])set_param([sys,'/','7-Median/MATLAB Fcn'],...		'hide name',0,...		'MATLAB Fcn','median',...		'Output Width','1',...		'Mask Display','Median',...		'position',[255,208,315,242])add_block('built-in/Outport',[sys,'/','7-Median/out_1'])set_param([sys,'/','7-Median/out_1'],...		'position',[355,215,375,235])add_block('built-in/Mux',[sys,'/','7-Median/Mux'])set_param([sys,'/','7-Median/Mux'],...		'orientation',1,...		'inputs','7',...		'position',[193,150,257,185])add_block('built-in/Memory',[sys,'/','7-Median/Memory3'])set_param([sys,'/','7-Median/Memory3'],...		'hide name',0,...		'position',[310,60,350,90])add_block('built-in/Memory',[sys,'/','7-Median/Memory2'])set_param([sys,'/','7-Median/Memory2'],...		'hide name',0,...		'position',[250,60,290,90])add_block('built-in/Memory',[sys,'/','7-Median/Memory1'])set_param([sys,'/','7-Median/Memory1'],...		'hide name',0,...		'position',[130,60,170,90])add_block('built-in/Memory',[sys,'/','7-Median/Memory'])set_param([sys,'/','7-Median/Memory'],...		'hide name',0,...		'position',[190,60,230,90])add_block('built-in/Inport',[sys,'/','7-Median/in_1'])set_param([sys,'/','7-Median/in_1'],...		'position',[35,65,55,85])add_block('built-in/Memory',[sys,'/','7-Median/Memory4'])set_param([sys,'/','7-Median/Memory4'],...		'hide name',0,...		'position',[425,60,465,90])add_block('built-in/Memory',[sys,'/','7-Median/Memory5'])set_param([sys,'/','7-Median/Memory5'],...		'hide name',0,...		'position',[370,60,410,90])add_line([sys,'/','7-Median'],[470,75;475,75;475,135;255,145])add_line([sys,'/','7-Median'],[415,75;415,125;245,125;245,145])add_line([sys,'/','7-Median'],[355,75;365,75])add_line([sys,'/','7-Median'],[415,75;420,75])add_line([sys,'/','7-Median'],[320,225;350,225])add_line([sys,'/','7-Median'],[175,75;185,75])add_line([sys,'/','7-Median'],[235,75;245,75])add_line([sys,'/','7-Median'],[295,75;305,75])add_line([sys,'/','7-Median'],[175,75;175,100;205,100;205,145])add_line([sys,'/','7-Median'],[355,75;355,115;235,115;235,145])add_line([sys,'/','7-Median'],[295,75;295,105;225,105;225,145])add_line([sys,'/','7-Median'],[235,75;235,95;215,95;215,145])add_line([sys,'/','7-Median'],[60,75;125,75])add_line([sys,'/','7-Median'],[110,75;110,115;195,115;195,145])add_line([sys,'/','7-Median'],[225,190;225,225;250,225])set_param([sys,'/','7-Median'],...		'Mask Display','7-Med')%     Finished composite block '7-Median'.set_param([sys,'/','7-Median'],...		'position',[45,45,85,85])%     Subsystem  '3-Median'.new_system([sys,'/','3-Median'])set_param([sys,'/','3-Median'],'Location',[180,196,613,476])add_block('built-in/Note',[sys,'/','3-Median/3-pt median filter'])set_param([sys,'/','3-Median/3-pt median filter'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[225,15,230,20])add_block('built-in/MATLAB Fcn',[sys,'/','3-Median/MATLAB Fcn'])set_param([sys,'/','3-Median/MATLAB Fcn'],...		'hide name',0,...		'MATLAB Fcn','median',...		'Output Width','1',...		'Mask Display','Median',...		'position',[255,198,315,232])add_block('built-in/Outport',[sys,'/','3-Median/out_1'])set_param([sys,'/','3-Median/out_1'],...		'position',[355,205,375,225])add_block('built-in/Mux',[sys,'/','3-Median/Mux'])set_param([sys,'/','3-Median/Mux'],...		'orientation',1,...		'inputs','3',...		'position',[193,145,257,180])add_block('built-in/Memory',[sys,'/','3-Median/Memory1'])set_param([sys,'/','3-Median/Memory1'],...		'hide name',0,...		'position',[130,70,170,100])add_block('built-in/Memory',[sys,'/','3-Median/Memory'])set_param([sys,'/','3-Median/Memory'],...		'hide name',0,...		'position',[190,70,230,100])add_block('built-in/Inport',[sys,'/','3-Median/in_1'])set_param([sys,'/','3-Median/in_1'],...		'position',[35,75,55,95])add_line([sys,'/','3-Median'],[320,215;350,215])add_line([sys,'/','3-Median'],[175,85;185,85])add_line([sys,'/','3-Median'],[175,85;175,110;225,110;225,140])add_line([sys,'/','3-Median'],[235,85;245,85;245,140])add_line([sys,'/','3-Median'],[60,85;125,85])add_line([sys,'/','3-Median'],[110,85;110,125;205,125;205,140])add_line([sys,'/','3-Median'],[225,185;225,215;250,215])set_param([sys,'/','3-Median'],...		'Mask Display','3-Med')%     Finished composite block '3-Median'.set_param([sys,'/','3-Median'],...		'position',[45,190,85,230])%     Subsystem  '3-MA'.new_system([sys,'/','3-MA'])set_param([sys,'/','3-MA'],'Location',[66,260,541,501])add_block('built-in/Note',[sys,'/','3-MA/3-pt moving average filter'])set_param([sys,'/','3-MA/3-pt moving average filter'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[245,10,250,15])add_block('built-in/Constant',[sys,'/','3-MA/Constant'])set_param([sys,'/','3-MA/Constant'],...		'hide name',0,...		'Value','1/3',...		'position',[180,181,215,209])add_block('built-in/Outport',[sys,'/','3-MA/out_1'])set_param([sys,'/','3-MA/out_1'],...		'position',[345,180,365,200])add_block('built-in/Product',[sys,'/','3-MA/Product'])set_param([sys,'/','3-MA/Product'],...		'hide name',0,...		'position',[270,178,300,202])add_block('built-in/Inport',[sys,'/','3-MA/in_1'])set_param([sys,'/','3-MA/in_1'],...		'position',[60,70,80,90])add_block('built-in/Memory',[sys,'/','3-MA/Memory'])set_param([sys,'/','3-MA/Memory'],...		'hide name',0,...		'position',[215,65,255,95])add_block('built-in/Memory',[sys,'/','3-MA/Memory1'])set_param([sys,'/','3-MA/Memory1'],...		'hide name',0,...		'position',[155,65,195,95])add_block('built-in/Sum',[sys,'/','3-MA/Sum'])set_param([sys,'/','3-MA/Sum'],...		'orientation',1,...		'hide name',0,...		'inputs','+++',...		'position',[222,135,278,155])add_line([sys,'/','3-MA'],[85,80;150,80])add_line([sys,'/','3-MA'],[135,80;135,120;230,130])add_line([sys,'/','3-MA'],[260,80;270,80;270,130])add_line([sys,'/','3-MA'],[200,80;200,105;250,105;250,130])add_line([sys,'/','3-MA'],[200,80;210,80])add_line([sys,'/','3-MA'],[250,160;250,185;265,185])add_line([sys,'/','3-MA'],[305,190;340,190])add_line([sys,'/','3-MA'],[220,195;265,195])set_param([sys,'/','3-MA'],...		'Mask Display','3-MA')%     Finished composite block '3-MA'.set_param([sys,'/','3-MA'],...		'position',[155,190,195,230])%     Subsystem  '5-MA'.new_system([sys,'/','5-MA'])set_param([sys,'/','5-MA'],'Location',[66,260,541,501])add_block('built-in/Note',[sys,'/','5-MA/5-pt moving average filter'])set_param([sys,'/','5-MA/5-pt moving average filter'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[235,15,240,20])add_block('built-in/Constant',[sys,'/','5-MA/Constant'])set_param([sys,'/','5-MA/Constant'],...		'hide name',0,...		'Value','1/5',...		'position',[160,182,190,208])add_block('built-in/Outport',[sys,'/','5-MA/out_1'])set_param([sys,'/','5-MA/out_1'],...		'position',[320,180,340,200])add_block('built-in/Product',[sys,'/','5-MA/Product'])set_param([sys,'/','5-MA/Product'],...		'hide name',0,...		'position',[245,178,275,202])add_block('built-in/Inport',[sys,'/','5-MA/in_1'])set_param([sys,'/','5-MA/in_1'],...		'position',[35,70,55,90])add_block('built-in/Memory',[sys,'/','5-MA/Memory'])set_param([sys,'/','5-MA/Memory'],...		'hide name',0,...		'position',[190,65,230,95])add_block('built-in/Memory',[sys,'/','5-MA/Memory1'])set_param([sys,'/','5-MA/Memory1'],...		'hide name',0,...		'position',[130,65,170,95])add_block('built-in/Memory',[sys,'/','5-MA/Memory2'])set_param([sys,'/','5-MA/Memory2'],...		'hide name',0,...		'position',[250,65,290,95])add_block('built-in/Memory',[sys,'/','5-MA/Memory3'])set_param([sys,'/','5-MA/Memory3'],...		'hide name',0,...		'position',[310,65,350,95])add_block('built-in/Sum',[sys,'/','5-MA/Sum'])set_param([sys,'/','5-MA/Sum'],...		'orientation',1,...		'hide name',0,...		'inputs','+++++',...		'position',[197,135,253,155])add_line([sys,'/','5-MA'],[60,80;125,80])add_line([sys,'/','5-MA'],[110,80;110,120;205,130])add_line([sys,'/','5-MA'],[235,80;235,100;225,100;225,130])add_line([sys,'/','5-MA'],[295,80;295,110;235,110;235,130])add_line([sys,'/','5-MA'],[355,80;365,80;365,120;245,130])add_line([sys,'/','5-MA'],[175,80;175,105;215,105;215,130])add_line([sys,'/','5-MA'],[295,80;305,80])add_line([sys,'/','5-MA'],[235,80;245,80])add_line([sys,'/','5-MA'],[175,80;185,80])add_line([sys,'/','5-MA'],[225,160;225,185;240,185])add_line([sys,'/','5-MA'],[280,190;315,190])add_line([sys,'/','5-MA'],[195,195;240,195])set_param([sys,'/','5-MA'],...		'Mask Display','5-MA')%     Finished composite block '5-MA'.set_param([sys,'/','5-MA'],...		'position',[155,115,195,155])%     Subsystem  '5-Median'.new_system([sys,'/','5-Median'])set_param([sys,'/','5-Median'],'Location',[226,260,641,537])add_block('built-in/Note',[sys,'/','5-Median/5-pt median filter'])set_param([sys,'/','5-Median/5-pt median filter'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[220,25,225,30])add_block('built-in/MATLAB Fcn',[sys,'/','5-Median/MATLAB Fcn'])set_param([sys,'/','5-Median/MATLAB Fcn'],...		'hide name',0,...		'MATLAB Fcn','median',...		'Output Width','1',...		'Mask Display','Median',...		'position',[250,198,310,232])add_block('built-in/Outport',[sys,'/','5-Median/out_1'])set_param([sys,'/','5-Median/out_1'],...		'position',[350,205,370,225])add_block('built-in/Mux',[sys,'/','5-Median/Mux'])set_param([sys,'/','5-Median/Mux'],...		'orientation',1,...		'inputs','5',...		'position',[188,145,252,180])add_block('built-in/Memory',[sys,'/','5-Median/Memory3'])set_param([sys,'/','5-Median/Memory3'],...		'hide name',0,...		'position',[305,70,345,100])add_block('built-in/Memory',[sys,'/','5-Median/Memory2'])set_param([sys,'/','5-Median/Memory2'],...		'hide name',0,...		'position',[245,70,285,100])add_block('built-in/Memory',[sys,'/','5-Median/Memory1'])set_param([sys,'/','5-Median/Memory1'],...		'hide name',0,...		'position',[125,70,165,100])add_block('built-in/Memory',[sys,'/','5-Median/Memory'])set_param([sys,'/','5-Median/Memory'],...		'hide name',0,...		'position',[185,70,225,100])add_block('built-in/Inport',[sys,'/','5-Median/in_1'])set_param([sys,'/','5-Median/in_1'],...		'position',[30,75,50,95])add_line([sys,'/','5-Median'],[315,215;345,215])add_line([sys,'/','5-Median'],[170,85;180,85])add_line([sys,'/','5-Median'],[230,85;240,85])add_line([sys,'/','5-Median'],[290,85;300,85])add_line([sys,'/','5-Median'],[170,85;170,110;210,110;210,140])add_line([sys,'/','5-Median'],[350,85;360,85;360,125;240,125;240,140])add_line([sys,'/','5-Median'],[290,85;290,115;230,115;230,140])add_line([sys,'/','5-Median'],[230,85;230,105;220,105;220,140])add_line([sys,'/','5-Median'],[55,85;120,85])add_line([sys,'/','5-Median'],[105,85;105,125;200,125;200,140])add_line([sys,'/','5-Median'],[220,185;220,215;245,215])set_param([sys,'/','5-Median'],...		'Mask Display','5-Med')%     Finished composite block '5-Median'.set_param([sys,'/','5-Median'],...		'position',[45,115,85,155])add_block('built-in/Note',[sys,'/','Filter Lib'])set_param([sys,'/','Filter Lib'],...		'Font Weight','bold',...		'Font Size',12,...		'position',[55,10,60,15])add_block('built-in/Note',[sys,'/','There is a delay associated with the median filters.'])set_param([sys,'/','There is a delay associated with the median filters.'],...		'position',[140,265,180,270])add_block('built-in/Note',[sys,'/','For x-pt filter:'])set_param([sys,'/','For x-pt filter:'],...		'position',[55,295,60,300])add_block('built-in/Note',[sys,'/','Delay = (x-1)//2 * simulation step size'])set_param([sys,'/','Delay = (x-1)//2 * simulation step size'],...		'position',[145,315,150,320])add_block('built-in/Note',[sys,'/',['e.g. for 5-pt Med, when we use a ',13,'fixed 1 ms step, the delay will be 2 ms.']])set_param([sys,'/',['e.g. for 5-pt Med, when we use a ',13,'fixed 1 ms step, the delay will be 2 ms.']],...		'position',[150,350,155,355])drawnow% Return any arguments.if (nargin | nargout)	% Must use feval here to access system in memory	if (nargin > 3)		if (flag == 0)			eval(['[ret,x0,str,ts,xts]=',sys,'(t,x,u,flag);'])		else			eval(['ret =', sys,'(t,x,u,flag);'])		end	else		[ret,x0,str,ts,xts] = feval(sys);	endelse	drawnow % Flash up the model and execute load callbackend